{"version":3,"sources":["main-es5.js","webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.html","webpack:///src/app/editor-panel/editor-panel.component.html","webpack:///src/app/layer-panel/layer-panel.component.html","webpack:///src/app/layer-panel/layer-select/layer-select.component.html","webpack:///src/app/particle-editor/particle-editor.component.html","webpack:///src/app/preview-panel/preview-panel.component.html","webpack:///src/app/tool-panel/direction-color-picker/direction-color-picker.component.html","webpack:///src/app/tool-panel/tool-panel.component.html","webpack:///node_modules/tslib/tslib.es6.js","webpack:///src/app/app.component.css","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/editor-panel/editor-panel.component.css","webpack:///src/app/editor-panel/editor-panel.component.ts","webpack:///src/app/layer-panel/layer-panel.component.css","webpack:///src/app/layer-panel/layer-panel.component.ts","webpack:///src/app/layer-panel/layer-select/layer-select.component.css","webpack:///src/app/layer-panel/layer-select/layer-select.component.ts","webpack:///src/app/particle-editor/particle-editor.component.css","webpack:///src/app/particle-editor/particle-editor.component.ts","webpack:///src/app/preview-panel/preview-panel.component.css","webpack:///src/app/preview-panel/preview-panel.component.ts","webpack:///src/app/preview-panel/renderer.ts","webpack:///src/app/services/layer.ts","webpack:///src/app/services/morphlayer.ts","webpack:///src/app/services/particlelayer.ts","webpack:///src/app/services/particles/emitter.ts","webpack:///src/app/services/particles/particle.ts","webpack:///src/app/services/particles/particlesystem.ts","webpack:///src/app/services/project-data.service.ts","webpack:///src/app/services/utils.ts","webpack:///src/app/tool-panel/direction-color-picker/direction-color-picker.component.css","webpack:///src/app/tool-panel/direction-color-picker/direction-color-picker.component.ts","webpack:///src/app/tool-panel/tool-panel.component.css","webpack:///src/app/tool-panel/tool-panel.component.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":[],"mappings":"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","file":"x","sourcesContent":["(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[\"main\"],{\n\n/***/ \"./$$_lazy_route_resource lazy recursive\":\n/*!******************************************************!*\\\n  !*** ./$$_lazy_route_resource lazy namespace object ***!\n  \\******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html\":\n/*!**************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html ***!\n  \\**************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"mainFlex\\\">\\n  <app-editor-panel [ngClass]=\\\"{'hidden': !pds.curLayer || pds.curLayer.type !== LayerType.MorphLayer}\\\"  class=\\\"flexGrow  card roundPanel\\\" (scroll)=\\\"scroll($event)\\\" #editorPanel></app-editor-panel>\\n  <app-particle-editor [ngClass]=\\\"{'hidden': !pds.curLayer || pds.curLayer.type !== LayerType.ParticleLayer}\\\"  class=\\\"flexGrow  card roundPanel\\\" #editorPanel></app-particle-editor>\\n  <div class=\\\"centerPanel\\\">\\n    <app-tool-panel class=\\\"flexGrow roundPanel card\\\"></app-tool-panel>\\n    <app-layer-panel class=\\\"flexGrow roundPanel card\\\"></app-layer-panel>\\n  </div>\\n  <app-preview-panel class=\\\"flexGrow roundPanel card\\\" (scroll)=\\\"scroll($event)\\\" #previewPanel></app-preview-panel>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/editor-panel/editor-panel.component.html\":\n/*!************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/editor-panel/editor-panel.component.html ***!\n  \\************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<canvas id=\\\"previewCanvas\\\" #previewCanvas></canvas>\\n<canvas #flowmapCanvas style=\\\"display: none;\\\"></canvas>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/layer-panel/layer-panel.component.html\":\n/*!**********************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/layer-panel/layer-panel.component.html ***!\n  \\**********************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"flexContainer\\\">\\n  <div class=\\\"layers\\\">\\n    <app-layer-select *ngFor=\\\"let layer of pds.layers\\\" [layer]=\\\"layer\\\"></app-layer-select>\\n  </div>\\n  <div class=\\\"toolbar\\\">\\n    <button type=\\\"button\\\" (click)=\\\"newLayerVisible=true\\\">+</button>\\n    <button style=\\\"float: right;\\\" (click)=\\\"pds.moveLayerDown();\\\"> down </button>\\n    <button style=\\\"float: right;\\\" (click)=\\\"pds.moveLayerUp();\\\"> up </button>\\n    <button style=\\\"float: right;\\\" (click)=\\\"pds.deleteCurrentLayer();\\\"> X </button>\\n  </div>\\n</div>\\n<div id=\\\"dialogBack\\\" (click)=\\\"newLayerVisible = false;\\\" [ngClass]=\\\"{'hidden':!newLayerVisible}\\\">\\n  <div id=\\\"newLayerDialog\\\" (click)=\\\"$event.stopPropagation()\\\">\\n    <button type=\\\"button\\\" (click)=\\\"selectLayerType('morph')\\\">MorphLayer</button>\\n    <button type=\\\"button\\\" (click)=\\\"selectLayerType('particle')\\\">ParticleLayer</button><br>\\n    <hr>\\n    <label>Layer Name:</label><br/>\\n    <input type=\\\"text\\\" placeholder=\\\"Enter layer name\\\" #layerNameInput/> <br/><br/>\\n    <div id=\\\"morphInput\\\">\\n      <select id=\\\"morphType\\\" size=\\\"2\\\">\\n          <option selected>flow</option>\\n          <option>wave</option>\\n      </select><br><br>\\n      <label>Image File:</label><br/>\\n      <input type=\\\"file\\\" #imageLoader name=\\\"imageLoader\\\"/><br><br>\\n      <canvas #imageCanvas></canvas><br>\\n      <button type=\\\"button\\\" style=\\\"float: right;\\\" (click)=\\\"createLayer()\\\">create new layer</button>\\n    </div>\\n\\n    <div id=\\\"particleInput\\\" style=\\\"display: none;\\\"><br><br>\\n      <button type=\\\"button\\\" style=\\\"float: right;\\\"  (click)=\\\"createParticleLayer()\\\">create new particle layer</button>\\n    </div>\\n\\n\\n  </div>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/layer-panel/layer-select/layer-select.component.html\":\n/*!************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/layer-panel/layer-select/layer-select.component.html ***!\n  \\************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div (click)=\\\"selectLayer()\\\" class=\\\"host\\\" [ngClass]=\\\"{'selected': pds.curLayer == layer}\\\">\\n  {{layer.name}}\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/particle-editor/particle-editor.component.html\":\n/*!******************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/particle-editor/particle-editor.component.html ***!\n  \\******************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div *ngFor=\\\"let emitter of getParticleLayer().emitters\\\">\\n  <b>{{emitter.readableName}}</b>\\n  <div *ngFor=\\\"let field of emitter.fields\\\">\\n    {{field.name}}: <input value=\\\"{{emitter[field.key]}}\\\" (change)=\\\"updateEmitter(emitter, field.key, $event)\\\">\\n  </div>\\n\\n</div>\\n<div *ngFor=\\\"let pf of getParticleLayer().particleFactories\\\">\\n  <b>{{pf.readableName}}</b>\\n  <div *ngFor=\\\"let field of pf.fields\\\">\\n    <ng-container *ngIf=\\\"field.type === 'number'\\\">\\n      {{field.name}}: <input value=\\\"{{pf[field.key]}}\\\" (change)=\\\"updateEmitter(pf, field.key, $event)\\\">\\n    </ng-container>\\n    <ng-container *ngIf=\\\"field.type === 'image'\\\">\\n      <label>{{field.name}}:</label><br/>\\n      <input type=\\\"file\\\" #imageLoader name=\\\"imageLoader\\\" (change)=\\\"updateImage(pf, field.key, $event)\\\"/><br>\\n    </ng-container>\\n  </div>\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/preview-panel/preview-panel.component.html\":\n/*!**************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/preview-panel/preview-panel.component.html ***!\n  \\**************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<canvas id=\\\"CanvasFinal\\\" style=\\\"background-color: #aaaaaa\\\" #CanvasFinal></canvas>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/tool-panel/direction-color-picker/direction-color-picker.component.html\":\n/*!*******************************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/tool-panel/direction-color-picker/direction-color-picker.component.html ***!\n  \\*******************************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<canvas #canvas></canvas>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/tool-panel/tool-panel.component.html\":\n/*!********************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/tool-panel/tool-panel.component.html ***!\n  \\********************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"Select direction:\\n<app-direction-color-picker></app-direction-color-picker><br><br>\\nZoom:<br>\\n<button type=\\\"button\\\" (click)=\\\"zoom(1.2)\\\">+</button>\\n<button type=\\\"button\\\" (click)=\\\"zoom(1/1.2)\\\">-</button><br><br>\\nBrush size:<br>\\n<input type=\\\"range\\\" min=\\\"1\\\" max=\\\"100\\\" value=\\\"20\\\" (change)=\\\"changePenSize($event);\\\"/><br><br>\\n\\n<button type=\\\"button\\\" (click)=\\\"blur()\\\">blur</button><br><br>\\n<button type=\\\"button\\\" (click)=\\\"renderDialog()\\\">render</button>\\n\\n<div id=\\\"dialogBack\\\" (click)=\\\"closeDialog($event)\\\" [ngClass]=\\\"{'hidden':!renderLayerVisible}\\\">\\n  <div id=\\\"newLayerDialog\\\" (click)=\\\"$event.stopPropagation()\\\">\\n    <h1>Render video</h1>\\n    <input type=\\\"number\\\" id=\\\"renderTime\\\"/> seconds<br><br>\\n    <button type=\\\"button\\\" (click)=\\\"render()\\\">render</button>\\n    <div id=\\\"outputElement\\\">\\n\\n    </div>\\n  </div>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/tslib/tslib.es6.js\":\n/*!*****************************************!*\\\n  !*** ./node_modules/tslib/tslib.es6.js ***!\n  \\*****************************************/\n/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__extends\", function() { return __extends; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__assign\", function() { return __assign; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__rest\", function() { return __rest; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__decorate\", function() { return __decorate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__param\", function() { return __param; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__metadata\", function() { return __metadata; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__awaiter\", function() { return __awaiter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__generator\", function() { return __generator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__exportStar\", function() { return __exportStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__values\", function() { return __values; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__read\", function() { return __read; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spread\", function() { return __spread; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spreadArrays\", function() { return __spreadArrays; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__await\", function() { return __await; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncGenerator\", function() { return __asyncGenerator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncDelegator\", function() { return __asyncDelegator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncValues\", function() { return __asyncValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__makeTemplateObject\", function() { return __makeTemplateObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importStar\", function() { return __importStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importDefault\", function() { return __importDefault; });\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nfunction __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nfunction __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./src/app/app.component.css\":\n/*!***********************************!*\\\n  !*** ./src/app/app.component.css ***!\n  \\***********************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".mainFlex {\\n  position: absolute;\\n  display: flex;\\n  width: 100%;\\n  top: 0px;\\n  bottom: 0px;\\n}\\n\\n.centerPanel {\\n  display: flex;\\n  width: 200px;\\n  flex-direction: column;\\n}\\n\\n.flexGrow {\\n  flex-grow: 1;\\n  flex-basis: 0;\\n  overflow: auto;\\n}\\n\\n.roundPanel {\\n  margin: 1rem;\\n  padding: 1rem;\\n  background: lightgray;\\n  border: 1px solid gray;\\n  border-radius: 0.2rem;\\n}\\n\\n.rectPanel {\\n  margin: 1rem;\\n  padding: 1rem;\\n  background: lightgray;\\n  border: 1px solid gray;\\n}\\n\\n.hidden {\\n  display: none;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLFdBQVc7RUFDWCxRQUFRO0VBQ1IsV0FBVztBQUNiOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFlBQVk7RUFDWixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLHFCQUFxQjtFQUNyQixzQkFBc0I7RUFDdEIscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYixxQkFBcUI7RUFDckIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsYUFBYTtBQUNmIiwiZmlsZSI6InNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbkZsZXgge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAxMDAlO1xuICB0b3A6IDBweDtcbiAgYm90dG9tOiAwcHg7XG59XG5cbi5jZW50ZXJQYW5lbCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAyMDBweDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuLmZsZXhHcm93IHtcbiAgZmxleC1ncm93OiAxO1xuICBmbGV4LWJhc2lzOiAwO1xuICBvdmVyZmxvdzogYXV0bztcbn1cblxuLnJvdW5kUGFuZWwge1xuICBtYXJnaW46IDFyZW07XG4gIHBhZGRpbmc6IDFyZW07XG4gIGJhY2tncm91bmQ6IGxpZ2h0Z3JheTtcbiAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcbiAgYm9yZGVyLXJhZGl1czogMC4ycmVtO1xufVxuXG4ucmVjdFBhbmVsIHtcbiAgbWFyZ2luOiAxcmVtO1xuICBwYWRkaW5nOiAxcmVtO1xuICBiYWNrZ3JvdW5kOiBsaWdodGdyYXk7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XG59XG5cbi5oaWRkZW4ge1xuICBkaXNwbGF5OiBub25lO1xufVxuIl19 */\");\n\n/***/ }),\n\n/***/ \"./src/app/app.component.ts\":\n/*!**********************************!*\\\n  !*** ./src/app/app.component.ts ***!\n  \\**********************************/\n/*! exports provided: AppComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppComponent\", function() { return AppComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services/project-data.service */ \"./src/app/services/project-data.service.ts\");\n/* harmony import */ var _services_layer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services/layer */ \"./src/app/services/layer.ts\");\n\n\n\n\nlet AppComponent = class AppComponent {\n    constructor(pds) {\n        this.pds = pds;\n        this.title = 'sedart';\n        this.LayerType = _services_layer__WEBPACK_IMPORTED_MODULE_3__[\"LayerType\"];\n    }\n    scroll(e) {\n        this.pds.curScrollLeft = e.srcElement.scrollLeft;\n        this.pds.curScrollTop = e.srcElement.scrollTop;\n        setTimeout(() => {\n            if (this.editorPanel.nativeElement.scrollTop !== this.pds.curScrollTop || this.editorPanel.nativeElement.scrollLeft !== this.pds.curScrollLeft) {\n                this.editorPanel.nativeElement.scrollTop = this.pds.curScrollTop;\n                this.editorPanel.nativeElement.scrollLeft = this.pds.curScrollLeft;\n            }\n            else {\n                this.previewPanel.nativeElement.scrollTop = this.pds.curScrollTop;\n                this.previewPanel.nativeElement.scrollLeft = this.pds.curScrollLeft;\n            }\n        }, 0);\n    }\n};\nAppComponent.ctorParameters = () => [\n    { type: _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__[\"ProjectDataService\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])('previewPanel', { static: false, read: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"] })\n], AppComponent.prototype, \"previewPanel\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])('editorPanel', { static: false, read: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"] })\n], AppComponent.prototype, \"editorPanel\", void 0);\nAppComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-root',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./app.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./app.component.css */ \"./src/app/app.component.css\")).default]\n    })\n], AppComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/app.module.ts\":\n/*!*******************************!*\\\n  !*** ./src/app/app.module.ts ***!\n  \\*******************************/\n/*! exports provided: AppModule */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppModule\", function() { return AppModule; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ \"./node_modules/@angular/platform-browser/fesm2015/platform-browser.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app.component */ \"./src/app/app.component.ts\");\n/* harmony import */ var _layer_panel_layer_panel_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./layer-panel/layer-panel.component */ \"./src/app/layer-panel/layer-panel.component.ts\");\n/* harmony import */ var _editor_panel_editor_panel_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./editor-panel/editor-panel.component */ \"./src/app/editor-panel/editor-panel.component.ts\");\n/* harmony import */ var _preview_panel_preview_panel_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./preview-panel/preview-panel.component */ \"./src/app/preview-panel/preview-panel.component.ts\");\n/* harmony import */ var _tool_panel_tool_panel_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./tool-panel/tool-panel.component */ \"./src/app/tool-panel/tool-panel.component.ts\");\n/* harmony import */ var _tool_panel_direction_color_picker_direction_color_picker_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tool-panel/direction-color-picker/direction-color-picker.component */ \"./src/app/tool-panel/direction-color-picker/direction-color-picker.component.ts\");\n/* harmony import */ var _layer_panel_layer_select_layer_select_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./layer-panel/layer-select/layer-select.component */ \"./src/app/layer-panel/layer-select/layer-select.component.ts\");\n/* harmony import */ var _particle_editor_particle_editor_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./particle-editor/particle-editor.component */ \"./src/app/particle-editor/particle-editor.component.ts\");\n\n\n\n\n\n\n\n\n\n\n\nlet AppModule = class AppModule {\n};\nAppModule = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__[\"NgModule\"])({\n        declarations: [\n            _app_component__WEBPACK_IMPORTED_MODULE_3__[\"AppComponent\"],\n            _layer_panel_layer_panel_component__WEBPACK_IMPORTED_MODULE_4__[\"LayerPanelComponent\"],\n            _editor_panel_editor_panel_component__WEBPACK_IMPORTED_MODULE_5__[\"EditorPanelComponent\"],\n            _preview_panel_preview_panel_component__WEBPACK_IMPORTED_MODULE_6__[\"PreviewPanelComponent\"],\n            _tool_panel_tool_panel_component__WEBPACK_IMPORTED_MODULE_7__[\"ToolPanelComponent\"],\n            _tool_panel_direction_color_picker_direction_color_picker_component__WEBPACK_IMPORTED_MODULE_8__[\"DirectionColorPickerComponent\"],\n            _layer_panel_layer_select_layer_select_component__WEBPACK_IMPORTED_MODULE_9__[\"LayerSelectComponent\"],\n            _particle_editor_particle_editor_component__WEBPACK_IMPORTED_MODULE_10__[\"ParticleEditorComponent\"]\n        ],\n        imports: [\n            _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__[\"BrowserModule\"]\n        ],\n        providers: [],\n        bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_3__[\"AppComponent\"]]\n    })\n], AppModule);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/editor-panel/editor-panel.component.css\":\n/*!*********************************************************!*\\\n  !*** ./src/app/editor-panel/editor-panel.component.css ***!\n  \\*********************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#previewCanvas {\\n  transition: 0.3s ease-in-out;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZWRpdG9yLXBhbmVsL2VkaXRvci1wYW5lbC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNEJBQTRCO0FBQzlCIiwiZmlsZSI6InNyYy9hcHAvZWRpdG9yLXBhbmVsL2VkaXRvci1wYW5lbC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI3ByZXZpZXdDYW52YXMge1xuICB0cmFuc2l0aW9uOiAwLjNzIGVhc2UtaW4tb3V0O1xufVxuXG4iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/editor-panel/editor-panel.component.ts\":\n/*!********************************************************!*\\\n  !*** ./src/app/editor-panel/editor-panel.component.ts ***!\n  \\********************************************************/\n/*! exports provided: EditorPanelComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EditorPanelComponent\", function() { return EditorPanelComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/project-data.service */ \"./src/app/services/project-data.service.ts\");\n/* harmony import */ var _services_layer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/layer */ \"./src/app/services/layer.ts\");\n\n\n\n\nlet EditorPanelComponent = class EditorPanelComponent {\n    constructor(pds) {\n        this.pds = pds;\n        this.paint = false;\n        this.mouseover = false;\n        this.radius = 20;\n        this.current = { x: 0, y: 0, zoom: 1 };\n        this.curZoom = 1;\n        this.scrollSync = new _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"EventEmitter\"]();\n    }\n    ngOnInit() {\n    }\n    updateImage() {\n        if (!this.pds.curLayer || this.pds.curLayer.type !== _services_layer__WEBPACK_IMPORTED_MODULE_3__[\"LayerType\"].MorphLayer) {\n            return;\n        }\n        const image = this.pds.editorImage;\n        this.previewCanvas.nativeElement.width = image.width;\n        this.previewCanvas.nativeElement.height = image.height;\n        this.flowmapCanvas.nativeElement.width = image.width;\n        this.flowmapCanvas.nativeElement.height = image.height;\n        this.previewCtx = this.previewCanvas.nativeElement.getContext('2d');\n        this.flowmapCtx = this.flowmapCanvas.nativeElement.getContext('2d');\n        this.flowmapCtx.fillStyle = '#808080';\n        this.flowmapCtx.fillRect(0, 0, this.previewCanvas.nativeElement.width, this.previewCanvas.nativeElement.height);\n        if (this.pds.editorImage) {\n            this.flowmapCtx.drawImage(this.pds.editorImage, 0, 0); // Or at whatever offset you like\n            this.previewCtx.drawImage(this.pds.editorImage, 0, 0); // Or at whatever offset you like\n        }\n        this.updatePreviewImage(-10, -10);\n    }\n    ngAfterViewInit() {\n        this.updateImage();\n        this.pds.layerSelectionChange.subscribe(() => this.updateImage());\n        this.pds.blurEmitter.subscribe(n => this.blur(n));\n        this.previewCanvas.nativeElement.addEventListener('mousemove', (ev) => this.mousemove(ev));\n        this.previewCanvas.nativeElement.addEventListener('mousedown', (ev) => this.mousedown(ev));\n        this.previewCanvas.nativeElement.addEventListener('mouseup', (ev) => this.mouseup(ev));\n        this.previewCanvas.nativeElement.addEventListener('mouseenter', (ev) => this.mouseover = true);\n        this.previewCanvas.nativeElement.addEventListener('mouseleave', (ev) => {\n            this.mouseover = false;\n            this.updatePreviewImage(-10, -10);\n        });\n        this.windowChanged();\n        this.pds.windowChanged.subscribe((e) => this.windowChanged());\n        this.updatePreviewImage(-20, -20);\n    }\n    mousemove(e) {\n        if (e.button === 0) {\n            const mouseX = (e.offsetX != null) ? e.offsetX : e.originalEvent.layerX;\n            const mouseY = (e.offsetY != null) ? e.offsetY : e.originalEvent.layerY;\n            this.drawAtPos(mouseX, mouseY);\n            this.updatePreviewImage(mouseX, mouseY);\n        }\n    }\n    mousedown(e) {\n        if (e.button === 0) {\n            this.paint = true;\n            const rect = this.previewCanvas.nativeElement.getBoundingClientRect();\n            const mouseX = (e.offsetX != null) ? e.offsetX : e.originalEvent.layerX;\n            const mouseY = (e.offsetY != null) ? e.offsetY : e.originalEvent.layerY;\n            this.drawAtPos(mouseX, mouseY);\n            this.updatePreviewImage(mouseX, mouseY);\n        }\n    }\n    mouseup(e) {\n        if (e.button === 0) {\n            this.paint = false;\n            this.pds.setFlowMap(this.flowmapCanvas.nativeElement);\n        }\n    }\n    blur(r) {\n        const c = this.flowmapCanvas.nativeElement;\n        const ctx = this.flowmapCtx;\n        ctx.filter = 'blur(' + r + 'px)';\n        ctx.drawImage(c, 0, 0);\n        ctx.filter = 'none';\n        this.pds.setFlowMap(this.flowmapCanvas.nativeElement);\n        this.updatePreviewImage(-20, -20);\n    }\n    windowChanged() {\n        this.curZoom = this.pds.curZoom;\n        this.previewCanvas.nativeElement.style.transform = 'scale(' + this.curZoom + ')';\n        this.previewCanvas.nativeElement.style.transformOrigin = 'top left';\n    }\n    updatePreviewImage(mouseX, mouseY) {\n        if (!this.pds.curLayer) {\n            return;\n        }\n        this.previewCtx.globalAlpha = 1;\n        this.previewCtx.drawImage(this.flowmapCanvas.nativeElement, 0, 0);\n        if (this.pds.curLayer.type === _services_layer__WEBPACK_IMPORTED_MODULE_3__[\"LayerType\"].MorphLayer && this.pds.curLayer.getImage()) {\n            this.previewCtx.globalAlpha = 0.2;\n            this.previewCtx.drawImage(this.pds.curLayer.getImage(), 0, 0);\n        }\n        this.previewCtx.globalAlpha = 1;\n        if (this.mouseover) {\n            this.previewCtx.beginPath();\n            this.previewCtx.arc(mouseX, mouseY, this.pds.drawSize, 0, 2 * Math.PI);\n            this.previewCtx.strokeStyle = this.pds.curColor;\n            this.previewCtx.stroke();\n        }\n    }\n    drawAtPos(mouseX, mouseY) {\n        if (this.paint) {\n            for (let r = this.pds.drawSize; r > 0; r--) {\n                this.flowmapCtx.globalAlpha = (this.pds.drawSize - r) / this.pds.drawSize;\n                this.flowmapCtx.beginPath();\n                this.flowmapCtx.arc(mouseX, mouseY, r, 0, 2 * Math.PI);\n                this.flowmapCtx.fillStyle = this.pds.curColor;\n                this.flowmapCtx.fill();\n            }\n            this.flowmapCtx.globalAlpha = 1;\n        }\n    }\n};\nEditorPanelComponent.ctorParameters = () => [\n    { type: _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__[\"ProjectDataService\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])('previewCanvas', { static: false, read: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"] })\n], EditorPanelComponent.prototype, \"previewCanvas\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])('flowmapCanvas', { static: false, read: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"] })\n], EditorPanelComponent.prototype, \"flowmapCanvas\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Output\"])()\n], EditorPanelComponent.prototype, \"scrollSync\", void 0);\nEditorPanelComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-editor-panel',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./editor-panel.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/editor-panel/editor-panel.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./editor-panel.component.css */ \"./src/app/editor-panel/editor-panel.component.css\")).default]\n    })\n], EditorPanelComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/layer-panel/layer-panel.component.css\":\n/*!*******************************************************!*\\\n  !*** ./src/app/layer-panel/layer-panel.component.css ***!\n  \\*******************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".flexContainer {\\n  display: flex;\\n  height: 100%;\\n  width: 100%;\\n  flex-direction: column;\\n}\\n\\n.toolbar {\\n  margin-top: 1rem;\\n}\\n\\n.layers {\\n  flex-grow: 1;\\n  display: flex;\\n  flex-direction: column-reverse;\\n  overflow: auto;\\n  padding: 0.2rem;\\n  background: rgba(255,255,255, 0.2);\\n}\\n\\n#dialogBack.hidden {\\n  display: none;\\n}\\n\\n#dialogBack {\\n  position: fixed;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n  min-width: 300px;\\n  min-height: 200px;\\n  background: rgba(0,0,0,0.2);\\n  z-index: 1000;\\n  display: grid;\\n}\\n\\n#newLayerDialog {\\n  width: 300px;\\n  margin-right: auto;\\n  padding: 1rem;\\n  background-color: white;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbGF5ZXItcGFuZWwvbGF5ZXItcGFuZWwuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYixZQUFZO0VBQ1osV0FBVztFQUNYLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLGNBQWM7RUFDZCxlQUFlO0VBQ2Ysa0NBQWtDO0FBQ3BDOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsZUFBZTtFQUNmLE9BQU87RUFDUCxNQUFNO0VBQ04sV0FBVztFQUNYLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLDJCQUEyQjtFQUMzQixhQUFhO0VBQ2IsYUFBYTtBQUNmOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsdUJBQXVCO0FBQ3pCIiwiZmlsZSI6InNyYy9hcHAvbGF5ZXItcGFuZWwvbGF5ZXItcGFuZWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5mbGV4Q29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuLnRvb2xiYXIge1xuICBtYXJnaW4tdG9wOiAxcmVtO1xufVxuXG4ubGF5ZXJzIHtcbiAgZmxleC1ncm93OiAxO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7XG4gIG92ZXJmbG93OiBhdXRvO1xuICBwYWRkaW5nOiAwLjJyZW07XG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsIDAuMik7XG59XG5cbiNkaWFsb2dCYWNrLmhpZGRlbiB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNkaWFsb2dCYWNrIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIG1pbi13aWR0aDogMzAwcHg7XG4gIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMik7XG4gIHotaW5kZXg6IDEwMDA7XG4gIGRpc3BsYXk6IGdyaWQ7XG59XG5cbiNuZXdMYXllckRpYWxvZyB7XG4gIHdpZHRoOiAzMDBweDtcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBwYWRkaW5nOiAxcmVtO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn1cbiJdfQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/layer-panel/layer-panel.component.ts\":\n/*!******************************************************!*\\\n  !*** ./src/app/layer-panel/layer-panel.component.ts ***!\n  \\******************************************************/\n/*! exports provided: LayerPanelComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LayerPanelComponent\", function() { return LayerPanelComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/project-data.service */ \"./src/app/services/project-data.service.ts\");\n/* harmony import */ var _services_morphlayer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/morphlayer */ \"./src/app/services/morphlayer.ts\");\n/* harmony import */ var _services_particlelayer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/particlelayer */ \"./src/app/services/particlelayer.ts\");\n\n\n\n\n\nlet LayerPanelComponent = class LayerPanelComponent {\n    constructor(pds) {\n        this.pds = pds;\n        this.newLayerVisible = false;\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n        this.imageLoader.nativeElement.addEventListener('change', (event) => {\n            this.handleImage(event);\n        }, false);\n        this.ctx = this.canvas.nativeElement.getContext('2d');\n    }\n    handleImage(e) {\n        const selfRef = this;\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            const img = new Image();\n            img.onload = () => {\n                selfRef.canvas.nativeElement.style.width = '200px';\n                selfRef.canvas.nativeElement.width = img.width;\n                selfRef.canvas.nativeElement.height = img.height;\n                selfRef.ctx.drawImage(img, 0, 0);\n                //selfRef.dataService.setImage(img);\n                const tcanvas = document.createElement('canvas');\n                tcanvas.width = img.width;\n                tcanvas.height = img.height;\n                const tctx = tcanvas.getContext('2d');\n                tctx.fillStyle = '#808080';\n                tctx.fillRect(0, 0, tcanvas.width, tcanvas.height);\n                //selfRef.dataService.setFlowMap(tcanvas.toDataURL('image/png'));\n            };\n            img.src = event.target.result;\n        };\n        reader.readAsDataURL(e.target.files[0]);\n    }\n    createLayer() {\n        const tc = document.createElement('canvas');\n        tc.width = this.canvas.nativeElement.width;\n        tc.height = this.canvas.nativeElement.height;\n        /*tc.width = 1024;\n        tc.height = 1024;*/\n        const tctx = tc.getContext('2d');\n        tctx.drawImage(this.canvas.nativeElement, 0, 0, this.canvas.nativeElement.width, this.canvas.nativeElement.height, 0, 0, tc.width, tc.height);\n        this.pds.addLayer(new _services_morphlayer__WEBPACK_IMPORTED_MODULE_3__[\"MorphLayer\"](this.layerNameInput.nativeElement.value, document.getElementById('morphType').value, tc));\n        this.newLayerVisible = false;\n    }\n    createParticleLayer() {\n        this.pds.addLayer(new _services_particlelayer__WEBPACK_IMPORTED_MODULE_4__[\"ParticleLayer\"](this.layerNameInput.nativeElement.value, 512, 512));\n        this.newLayerVisible = false;\n    }\n    selectLayerType(select) {\n        if (select === 'morph') {\n            document.getElementById('morphInput').style.display = 'block';\n            document.getElementById('particleInput').style.display = 'none';\n        }\n        else {\n            document.getElementById('morphInput').style.display = 'none';\n            document.getElementById('particleInput').style.display = 'block';\n        }\n    }\n};\nLayerPanelComponent.ctorParameters = () => [\n    { type: _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__[\"ProjectDataService\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])('layerNameInput', { static: false, read: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"] })\n], LayerPanelComponent.prototype, \"layerNameInput\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])('imageLoader', { static: false, read: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"] })\n], LayerPanelComponent.prototype, \"imageLoader\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])('imageCanvas', { static: false, read: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"] })\n], LayerPanelComponent.prototype, \"canvas\", void 0);\nLayerPanelComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-layer-panel',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./layer-panel.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/layer-panel/layer-panel.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./layer-panel.component.css */ \"./src/app/layer-panel/layer-panel.component.css\")).default]\n    })\n], LayerPanelComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/layer-panel/layer-select/layer-select.component.css\":\n/*!*********************************************************************!*\\\n  !*** ./src/app/layer-panel/layer-select/layer-select.component.css ***!\n  \\*********************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".host {\\n  border: 1px solid gray;\\n  padding: 0.2rem;\\n  display: block;\\n  cursor: pointer;\\n  background-color: white;\\n}\\n\\n.selected{\\n  background-color: aliceblue;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbGF5ZXItcGFuZWwvbGF5ZXItc2VsZWN0L2xheWVyLXNlbGVjdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixjQUFjO0VBQ2QsZUFBZTtFQUNmLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLDJCQUEyQjtBQUM3QiIsImZpbGUiOiJzcmMvYXBwL2xheWVyLXBhbmVsL2xheWVyLXNlbGVjdC9sYXllci1zZWxlY3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5ob3N0IHtcbiAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcbiAgcGFkZGluZzogMC4ycmVtO1xuICBkaXNwbGF5OiBibG9jaztcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn1cblxuLnNlbGVjdGVke1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBhbGljZWJsdWU7XG59XG4iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/layer-panel/layer-select/layer-select.component.ts\":\n/*!********************************************************************!*\\\n  !*** ./src/app/layer-panel/layer-select/layer-select.component.ts ***!\n  \\********************************************************************/\n/*! exports provided: LayerSelectComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LayerSelectComponent\", function() { return LayerSelectComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/project-data.service */ \"./src/app/services/project-data.service.ts\");\n\n\n\nlet LayerSelectComponent = class LayerSelectComponent {\n    constructor(pds) {\n        this.pds = pds;\n    }\n    ngOnInit() {\n    }\n    selectLayer() {\n        this.pds.selectLayer(this.layer);\n    }\n};\nLayerSelectComponent.ctorParameters = () => [\n    { type: _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__[\"ProjectDataService\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Input\"])()\n], LayerSelectComponent.prototype, \"layer\", void 0);\nLayerSelectComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-layer-select',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./layer-select.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/layer-panel/layer-select/layer-select.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./layer-select.component.css */ \"./src/app/layer-panel/layer-select/layer-select.component.css\")).default]\n    })\n], LayerSelectComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/particle-editor/particle-editor.component.css\":\n/*!***************************************************************!*\\\n  !*** ./src/app/particle-editor/particle-editor.component.css ***!\n  \\***************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhcnRpY2xlLWVkaXRvci9wYXJ0aWNsZS1lZGl0b3IuY29tcG9uZW50LmNzcyJ9 */\");\n\n/***/ }),\n\n/***/ \"./src/app/particle-editor/particle-editor.component.ts\":\n/*!**************************************************************!*\\\n  !*** ./src/app/particle-editor/particle-editor.component.ts ***!\n  \\**************************************************************/\n/*! exports provided: ParticleEditorComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ParticleEditorComponent\", function() { return ParticleEditorComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/project-data.service */ \"./src/app/services/project-data.service.ts\");\n\n\n\nlet ParticleEditorComponent = class ParticleEditorComponent {\n    constructor(pds) {\n        this.pds = pds;\n    }\n    ngOnInit() {\n    }\n    getParticleLayer() {\n        return this.pds.curLayer ? this.pds.curLayer : [];\n    }\n    updateEmitter(emitter, key, event) {\n        emitter[key] = parseFloat(event.target.value);\n    }\n    updateImage(emitter, key, e) {\n        const selfRef = this;\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            const img = new Image();\n            img.onload = () => {\n                const tcanvas = document.createElement('canvas');\n                tcanvas.width = img.width;\n                tcanvas.height = img.height;\n                const tctx = tcanvas.getContext('2d');\n                tctx.drawImage(img, 0, 0);\n                emitter[key] = tcanvas;\n            };\n            img.src = event.target.result;\n        };\n        reader.readAsDataURL(e.target.files[0]);\n    }\n};\nParticleEditorComponent.ctorParameters = () => [\n    { type: _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__[\"ProjectDataService\"] }\n];\nParticleEditorComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-particle-editor',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./particle-editor.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/particle-editor/particle-editor.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./particle-editor.component.css */ \"./src/app/particle-editor/particle-editor.component.css\")).default]\n    })\n], ParticleEditorComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/preview-panel/preview-panel.component.css\":\n/*!***********************************************************!*\\\n  !*** ./src/app/preview-panel/preview-panel.component.css ***!\n  \\***********************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#CanvasFinal {\\n  transition: 0.3s ease-in-out;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcHJldmlldy1wYW5lbC9wcmV2aWV3LXBhbmVsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw0QkFBNEI7QUFDOUIiLCJmaWxlIjoic3JjL2FwcC9wcmV2aWV3LXBhbmVsL3ByZXZpZXctcGFuZWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIiNDYW52YXNGaW5hbCB7XG4gIHRyYW5zaXRpb246IDAuM3MgZWFzZS1pbi1vdXQ7XG59XG4iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/preview-panel/preview-panel.component.ts\":\n/*!**********************************************************!*\\\n  !*** ./src/app/preview-panel/preview-panel.component.ts ***!\n  \\**********************************************************/\n/*! exports provided: PreviewPanelComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PreviewPanelComponent\", function() { return PreviewPanelComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/project-data.service */ \"./src/app/services/project-data.service.ts\");\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./renderer */ \"./src/app/preview-panel/renderer.ts\");\n\n\n\n\nlet PreviewPanelComponent = class PreviewPanelComponent {\n    constructor(pds) {\n        this.pds = pds;\n    }\n    windowChanged() {\n        const curZoom = this.pds.curZoom;\n        this.canvas.nativeElement.style.transform = 'scale(' + curZoom + ')';\n        this.canvas.nativeElement.style.transformOrigin = 'top left';\n    }\n    ngOnChanges(changes) {\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n        this.windowChanged();\n        this.pds.windowChanged.subscribe((e) => this.windowChanged());\n        this.init();\n        this.pds.layerContentChange.subscribe(() => this.init());\n        this.pds.layerSelectionChange.subscribe(() => this.init());\n    }\n    init() {\n        if (!this.pds.curLayer) {\n            return;\n        }\n        const image = this.pds.editorImage;\n        const canvas = document.getElementById('CanvasFinal');\n        canvas.width = this.pds.width;\n        canvas.height = this.pds.height;\n        canvas.style.width = this.pds.width;\n        canvas.style.height = this.pds.height;\n        if (this.contextCanvasFinal) {\n            this.contextCanvasFinal.running = false;\n        }\n        const selfRef = this;\n        this.contextCanvasFinal = new _renderer__WEBPACK_IMPORTED_MODULE_3__[\"ThreeContext\"]('CanvasFinal', (threeContext) => {\n            threeContext.uniforms = {\n                flowSpeed: { type: 'f', value: 0.02 },\n                cycleTime: { type: 'f', value: 10 },\n            };\n            // waveMapFrag\n            threeContext.initFullScreenCanvas(selfRef.pds.layers);\n        }, null);\n        this.contextCanvasFinal.render(selfRef.pds.layers);\n        this.contextCanvasFinal.renderFrame.subscribe(() => selfRef.pds.renderedFrameEmitter.emit());\n    }\n};\nPreviewPanelComponent.ctorParameters = () => [\n    { type: _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__[\"ProjectDataService\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Input\"])()\n], PreviewPanelComponent.prototype, \"scrollSync\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])('CanvasFinal', { static: false, read: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"] })\n], PreviewPanelComponent.prototype, \"canvas\", void 0);\nPreviewPanelComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-preview-panel',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./preview-panel.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/preview-panel/preview-panel.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./preview-panel.component.css */ \"./src/app/preview-panel/preview-panel.component.css\")).default]\n    })\n], PreviewPanelComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/preview-panel/renderer.ts\":\n/*!*******************************************!*\\\n  !*** ./src/app/preview-panel/renderer.ts ***!\n  \\*******************************************/\n/*! exports provided: ThreeContext, createFullScreenQuad */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ThreeContext\", function() { return ThreeContext; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createFullScreenQuad\", function() { return createFullScreenQuad; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var three_full__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three-full */ \"./node_modules/three-full/builds/Three.es.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n\n\n\nclass ThreeContext {\n    constructor(canvasName, initFunction, renderFunction) {\n        this.running = true;\n        this.uniformList = [];\n        this.renderFrame = new _angular_core__WEBPACK_IMPORTED_MODULE_2__[\"EventEmitter\"]();\n        this.time = 0;\n        this.canvas = document.getElementById(canvasName);\n        this.renderer = new three_full__WEBPACK_IMPORTED_MODULE_1__[\"WebGLRenderer\"]({ canvas: this.canvas, antialiasing: false, alpha: true });\n        this.uniforms = {};\n        this.scene = new three_full__WEBPACK_IMPORTED_MODULE_1__[\"Scene\"]();\n        this.camera = null;\n        this.clock = new three_full__WEBPACK_IMPORTED_MODULE_1__[\"Clock\"](true);\n        this.renderFunction = renderFunction;\n        this.renderer.setPixelRatio(window.devicePixelRatio);\n        this.size = [this.canvas.width, this.canvas.height];\n        this.renderer.setSize(this.size[0], this.size[1]);\n        if (initFunction !== 'undefined') {\n            initFunction(this);\n        }\n        else {\n            // Use a default camera\n            this.camera = new three_full__WEBPACK_IMPORTED_MODULE_1__[\"PerspectiveCamera\"](45, 1, 0.1, 1000);\n        }\n    }\n    initFullScreenCanvas(layers) {\n        const useVertColors = undefined;\n        const vertShaderName = 'passthroughVert';\n        const fragShaderName = 'flowMapFrag';\n        const halfSize = [this.size[0] / 2, this.size[1] / 2];\n        // Setup camera\n        this.camera = new three_full__WEBPACK_IMPORTED_MODULE_1__[\"OrthographicCamera\"](-halfSize[0], halfSize[0], halfSize[1], -halfSize[1], -10, 1000);\n        this.camera.position.z = 1;\n        const defaultUniforms = {\n            time: { type: 'f', value: 0.0 },\n            timeDelta: { type: 'f', value: 0.0 },\n        };\n        this.uniforms = extend_object(defaultUniforms, this.uniforms || {});\n        this.scene = this.createFullScreenQuadScene(layers);\n    }\n    updateDefaultUniforms(uniforms) {\n        if (uniforms.timeDelta != null) {\n            uniforms.timeDelta.value = this.timeDelta;\n        }\n        if (uniforms.time != null) {\n            uniforms.time.value = this.time;\n        }\n    }\n    render(layers) {\n        if (!this.camera) {\n            return;\n        }\n        const self = this;\n        if (this.running) {\n            requestAnimationFrame(() => {\n                self.render(layers);\n                self.renderFrame.emit();\n                this.time += 1 / 60;\n            });\n        }\n        for (const layer of layers) {\n            layer.timeStep();\n        }\n        this.timeDelta = this.time;\n        this.updateDefaultUniforms(this.uniforms);\n        this.uniformList.forEach((uniform) => {\n            this.updateDefaultUniforms(uniform);\n        });\n        this.renderer.setClearColor(0xff0000, 0);\n        this.renderer.clear();\n        if (this.renderFunction !== 'undefined' && this.renderFunction != null) {\n            this.renderFunction(this);\n        }\n        this.renderer.render(this.scene, this.camera);\n    }\n    createFullScreenQuadScene(layers) {\n        const scene = new three_full__WEBPACK_IMPORTED_MODULE_1__[\"Scene\"]();\n        this.uniformList = [];\n        layers.forEach((layer, i) => {\n            const tuniforms = layer.addToScene(scene, i);\n            this.uniformList.push(tuniforms);\n        });\n        return scene;\n    }\n}\nfunction extend_object(destination, source) {\n    for (const property in source) {\n        if (source.hasOwnProperty(property)) {\n            destination[property] = source[property];\n        }\n    }\n    return destination;\n}\nfunction createMaterial(vertShaderName, fragShaderName, uniforms, useVertColors) {\n    const vShader = document.getElementById(vertShaderName);\n    if (vShader == null) {\n        console.error('Couldn\\'t find vert shader: ' + vertShaderName);\n    }\n    const fShader = document.getElementById(fragShaderName);\n    if (fShader == null) {\n        console.error('Couldn\\'t find frag shader: ' + fragShaderName);\n    }\n    return new three_full__WEBPACK_IMPORTED_MODULE_1__[\"ShaderMaterial\"]({\n        uniforms: uniforms || {},\n        vertexShader: vShader.text,\n        fragmentShader: fShader.text,\n        vertexColors: useVertColors ? three_full__WEBPACK_IMPORTED_MODULE_1__[\"VertexColors\"] : three_full__WEBPACK_IMPORTED_MODULE_1__[\"NoColors\"],\n        transparent: true,\n    });\n}\nfunction createFullScreenQuad(vertShaderName, fragShaderName, uniforms, useVertColors, z) {\n    const shaderMaterial = createMaterial(vertShaderName, fragShaderName, uniforms, useVertColors);\n    const planeGeo = new three_full__WEBPACK_IMPORTED_MODULE_1__[\"PlaneGeometry\"](2, 2, 1, 1);\n    planeGeo.translate(0, 0, -z / 10.0);\n    const mesh = new three_full__WEBPACK_IMPORTED_MODULE_1__[\"Mesh\"](planeGeo, shaderMaterial);\n    mesh.name = 'FullScreenQuad';\n    return mesh;\n}\nfunction setVertColors(mesh, color) {\n    for (let i = 0; i < mesh.faces.length; i++) {\n        const face = mesh.faces[i];\n        face.vertexColors = [color, color, color];\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/services/layer.ts\":\n/*!***********************************!*\\\n  !*** ./src/app/services/layer.ts ***!\n  \\***********************************/\n/*! exports provided: LayerType */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LayerType\", function() { return LayerType; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nvar LayerType;\n(function (LayerType) {\n    LayerType[LayerType[\"MorphLayer\"] = 1] = \"MorphLayer\";\n    LayerType[LayerType[\"ParticleLayer\"] = 2] = \"ParticleLayer\";\n})(LayerType || (LayerType = {}));\n\n\n/***/ }),\n\n/***/ \"./src/app/services/morphlayer.ts\":\n/*!****************************************!*\\\n  !*** ./src/app/services/morphlayer.ts ***!\n  \\****************************************/\n/*! exports provided: MorphLayer */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MorphLayer\", function() { return MorphLayer; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/app/services/utils.ts\");\n/* harmony import */ var three_full__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three-full */ \"./node_modules/three-full/builds/Three.es.js\");\n/* harmony import */ var _preview_panel_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../preview-panel/renderer */ \"./src/app/preview-panel/renderer.ts\");\n/* harmony import */ var _layer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./layer */ \"./src/app/services/layer.ts\");\n\n\n\n\n\nclass MorphLayer {\n    constructor(name, morphType, inputImage) {\n        this.name = name;\n        this.morphType = morphType;\n        this.type = _layer__WEBPACK_IMPORTED_MODULE_4__[\"LayerType\"].MorphLayer;\n        this.type = _layer__WEBPACK_IMPORTED_MODULE_4__[\"LayerType\"].MorphLayer;\n        if (!inputImage) {\n            // create dummy data\n            this.setFlowmap(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"createDefaultImage\"])(512, 512));\n            this.setImage(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"createDefaultImage\"])(512, 512));\n        }\n        else {\n            this.setFlowmap(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"createDefaultImage\"])(inputImage.width, inputImage.height));\n            this.setImage(inputImage);\n        }\n    }\n    setFlowmap(newFlowmap) {\n        this.flowmap = newFlowmap;\n        this.flowmapTexture = new three_full__WEBPACK_IMPORTED_MODULE_2__[\"CanvasTexture\"](this.flowmap);\n        this.flowmapTexture.flipY = false;\n        this.flowmapTexture.magFilter = three_full__WEBPACK_IMPORTED_MODULE_2__[\"NearestFilter\"];\n        this.flowmapTexture.minFilter = three_full__WEBPACK_IMPORTED_MODULE_2__[\"NearestFilter\"];\n    }\n    getFlowmap() {\n        return this.flowmap;\n    }\n    getFlowmapTexture() {\n        return this.flowmapTexture;\n    }\n    setImage(newImage) {\n        this.image = newImage;\n        const tc = document.createElement('canvas');\n        /*tc.width = (newFlowmap as any).nativeElement.width;\n        tc.height = (newFlowmap as any).nativeElement.height;*/\n        tc.width = 1024;\n        tc.height = 1024;\n        const tctx = tc.getContext('2d');\n        tctx.drawImage(newImage, 0, 0, newImage.width, newImage.height, 0, 0, 1024, 1024);\n        this.imageTexture = new three_full__WEBPACK_IMPORTED_MODULE_2__[\"CanvasTexture\"](tc);\n        // this.imageTexture.magFilter = THREE.NearestFilter;\n        // this.imageTexture.minFilter = THREE.NearestFilter;\n        this.imageTexture.flipY = false;\n    }\n    addToScene(scene, index) {\n        const tuniforms = {\n            texture: { type: 't', value: this.getImageTexture() },\n            flowMap: { type: 't', value: this.getFlowmapTexture() },\n            flowSpeed: { type: 'f', value: 0.1 },\n            cycleTime: { type: 'f', value: 5 },\n            time: { type: 'f', value: 0.0 },\n            timeDelta: { type: 'f', value: 0.0 },\n        };\n        const plane = Object(_preview_panel_renderer__WEBPACK_IMPORTED_MODULE_3__[\"createFullScreenQuad\"])('passthroughVert', this.morphType, tuniforms, null, index);\n        scene.add(plane);\n        return tuniforms;\n    }\n    getImage() {\n        return this.image;\n    }\n    getImageTexture() {\n        return this.imageTexture;\n    }\n    timeStep() {\n    }\n    saveState() {\n        return {\n            type: this.type,\n            name: this.name,\n            flowMap: this.getFlowmap().toDataURL('image/png'),\n            image: this.getImage().toDataURL('image/png'),\n        };\n    }\n    restoreState(state) {\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/services/particlelayer.ts\":\n/*!*******************************************!*\\\n  !*** ./src/app/services/particlelayer.ts ***!\n  \\*******************************************/\n/*! exports provided: ParticleLayer */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ParticleLayer\", function() { return ParticleLayer; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/app/services/utils.ts\");\n/* harmony import */ var three_full__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three-full */ \"./node_modules/three-full/builds/Three.es.js\");\n/* harmony import */ var _preview_panel_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../preview-panel/renderer */ \"./src/app/preview-panel/renderer.ts\");\n/* harmony import */ var _layer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./layer */ \"./src/app/services/layer.ts\");\n/* harmony import */ var _particles_particle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./particles/particle */ \"./src/app/services/particles/particle.ts\");\n/* harmony import */ var _particles_emitter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./particles/emitter */ \"./src/app/services/particles/emitter.ts\");\n\n\n\n\n\n\n\nclass ParticleLayer {\n    constructor(name, width, height) {\n        this.name = name;\n        this.type = _layer__WEBPACK_IMPORTED_MODULE_4__[\"LayerType\"].ParticleLayer;\n        this.emitters = [new _particles_emitter__WEBPACK_IMPORTED_MODULE_6__[\"RectangularEmitter\"]()];\n        this.particles = [];\n        this.deadps = [];\n        this.particleFactories = [new _particles_particle__WEBPACK_IMPORTED_MODULE_5__[\"ParticleFactory\"]()];\n        // create dummy data\n        this.setCanvas(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"createDefaultImage\"])(width, height));\n        this.type = _layer__WEBPACK_IMPORTED_MODULE_4__[\"LayerType\"].ParticleLayer;\n    }\n    setCanvas(newCanvas) {\n        this.canvas = newCanvas;\n        this.canvasTexture = new three_full__WEBPACK_IMPORTED_MODULE_2__[\"CanvasTexture\"](this.canvas);\n        this.canvasTexture.flipY = false;\n        this.canvasTexture.magFilter = three_full__WEBPACK_IMPORTED_MODULE_2__[\"NearestFilter\"];\n        this.canvasTexture.minFilter = three_full__WEBPACK_IMPORTED_MODULE_2__[\"NearestFilter\"];\n    }\n    getCanvasTexture() {\n        return this.canvasTexture;\n    }\n    addToScene(scene, index) {\n        const tuniforms = {\n            texture: { type: 't', value: this.getCanvasTexture() },\n            time: { type: 'f', value: 0.0 },\n            timeDelta: { type: 'f', value: 0.0 },\n        };\n        const plane = Object(_preview_panel_renderer__WEBPACK_IMPORTED_MODULE_3__[\"createFullScreenQuad\"])('passthroughVert', 'passthroughFrag', tuniforms, null, index);\n        scene.add(plane);\n        return tuniforms;\n    }\n    timeStep() {\n        const ctx = this.canvas.getContext('2d');\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        const scaleX = this.canvas.width / 100;\n        const scaleY = this.canvas.height / 100;\n        for (const p of this.particles) {\n            p.x += p.vx;\n            p.y += p.vy;\n            p.ttl -= 1;\n            if (p.ttl === 0) {\n                p.dead = true;\n                this.deadps.push(p);\n            }\n        }\n        for (const p of this.particles) {\n            if (p.ttl >= 0) {\n                p.draw(ctx);\n            }\n        }\n        for (const pf of this.particleFactories) {\n            pf.scaleX = this.canvas.width / 100;\n            pf.scaleY = this.canvas.height / 100;\n        }\n        for (const emitter of this.emitters) {\n            emitter.emit(this.particleFactories[0], this.particles, this.deadps);\n        }\n        this.canvasTexture.needsUpdate = true;\n    }\n    restoreState(state) {\n    }\n    saveState() {\n        return {\n            type: this.type,\n            name: this.name,\n            canvas: this.canvas.toDataURL('image/png'),\n            emitters: this.emitters.map(e => e.saveState()),\n            particleFactories: this.particleFactories.map(pf => pf.saveState())\n        };\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/services/particles/emitter.ts\":\n/*!***********************************************!*\\\n  !*** ./src/app/services/particles/emitter.ts ***!\n  \\***********************************************/\n/*! exports provided: RectangularEmitter */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RectangularEmitter\", function() { return RectangularEmitter; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _particlesystem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./particlesystem */ \"./src/app/services/particles/particlesystem.ts\");\n\n\nclass RectangularEmitter {\n    constructor(minx = 0, miny = 0, maxx = 100, maxy = 100, mindir = 0, maxdir = 360, minvel = 1, maxvel = 2) {\n        this.readableName = 'Rectangular emitter';\n        this.fields = [\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('emissionRate', 'Rate of particle emission'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('minx', 'Minimum x-pos (0-100)'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('maxx', 'Maximum x-pos (0-100)'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('miny', 'Minimum y-pos (0-100)'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('maxy', 'Maximum y-pos (0-100)'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('mindir', 'Minimum starting angle (0-360)'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('maxdir', 'Maximum starting angle (0-360)'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('minvel', 'Minimum starting velocity'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('maxvel', 'Maximum starting velocity'),\n        ];\n        this.minx = Math.min(minx, maxx);\n        this.maxx = Math.max(minx, maxx);\n        this.miny = Math.min(miny, maxy);\n        this.maxy = Math.max(miny, maxy);\n        this.mindir = Math.min(mindir, maxdir);\n        this.maxdir = Math.max(mindir, maxdir);\n        this.minvel = Math.min(minvel, maxvel);\n        this.maxvel = Math.max(minvel, maxvel);\n        this.emissionRate = 1;\n    }\n    emit(particleFactory, particles, deadps) {\n        const res = [];\n        for (let i = this.emissionRate; i > 0; i--) {\n            if (i > 1 || Math.random() < i) {\n                const angle = this.mindir + Math.random() * (this.maxdir - this.mindir);\n                const vel = this.minvel + Math.random() * (this.maxvel - this.minvel);\n                const xpos = this.minx + Math.random() * (this.maxx - this.minx);\n                const ypos = this.miny + Math.random() * (this.maxy - this.miny);\n                const xvel = Math.cos(angle / 180 * Math.PI) * vel;\n                const yvel = Math.sin(angle / 180 * Math.PI) * vel;\n                particleFactory.create(xpos, ypos, xvel, yvel, particles, deadps);\n            }\n        }\n    }\n    saveState() {\n        const res = {};\n        for (const field of this.fields) {\n            res[field.key] = this[field.key];\n        }\n        return res;\n    }\n    restoreState(state) {\n        for (const key in state) {\n            this[key] = state[key];\n        }\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/services/particles/particle.ts\":\n/*!************************************************!*\\\n  !*** ./src/app/services/particles/particle.ts ***!\n  \\************************************************/\n/*! exports provided: Particle, ParticleFactory */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Particle\", function() { return Particle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ParticleFactory\", function() { return ParticleFactory; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _particlesystem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./particlesystem */ \"./src/app/services/particles/particlesystem.ts\");\n\n\nclass Particle {\n    constructor() {\n        this.dead = true;\n        this.x = 0;\n        this.y = 0;\n        this.vx = 0;\n        this.vy = 0;\n        this.ttl = 0;\n    }\n    draw(ctx) {\n        ctx.resetTransform();\n        ctx.globalAlpha = this.pf.getAlpha(this.ttl);\n        ctx.beginPath();\n        if (this.pf.image) {\n            ctx.translate(this.x, this.y);\n            ctx.scale(this.pf.getSize(this.ttl) * this.pf.scaleX / this.pf.image.width, this.pf.getSize(this.ttl) * this.pf.scaleY / this.pf.image.height);\n            ctx.drawImage(this.pf.image, -this.pf.image.width / 2, -this.pf.image.width / 2);\n        }\n        else {\n            ctx.arc(this.x, this.y, 5, 0, 2 * Math.PI);\n        }\n        ctx.stroke();\n        ctx.resetTransform();\n    }\n}\nclass ParticleFactory {\n    constructor() {\n        this.alpha1 = 0;\n        this.alpha2 = 1;\n        this.alpha3 = 0;\n        this.acc1 = 0;\n        this.acc2 = 0;\n        this.acc3 = 0;\n        this.size1 = 0;\n        this.size2 = 5;\n        this.size3 = 0;\n        this.ttl = 100;\n        this.fields = [\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('alpha1', 'Alpha beginning (0-1)'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('alpha2', 'Alpha middle (0-1)'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('alpha3', 'Alpha end (0-1)'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('size1', 'Size beginning'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('size2', 'Size middle'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('size3', 'Size end'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('acc1', 'Acceleration beginning'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('acc2', 'Acceleration middle'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('acc3', 'Acceleration end'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"NumberField\"]('ttl', 'Frames to live'),\n            new _particlesystem__WEBPACK_IMPORTED_MODULE_1__[\"ImageField\"]('image', 'Image ')\n        ];\n        this.readableName = 'ParticleFactory';\n    }\n    create(xpos, ypos, xvel, yvel, particles, deadps) {\n        let p;\n        if (deadps.length > 0) {\n            p = deadps.pop();\n        }\n        else {\n            p = new Particle();\n            particles.push(p);\n        }\n        p.x = xpos * this.scaleX;\n        p.y = ypos * this.scaleY;\n        p.vx = xvel * this.scaleX;\n        p.vy = yvel * this.scaleY;\n        p.dead = false;\n        p.ttl = this.ttl;\n        p.pf = this;\n    }\n    getAlpha(curttl) {\n        const p = (this.ttl - curttl) / this.ttl;\n        if (p < 0.5) {\n            return this.alpha1 * (1 - p * 2) + this.alpha2 * p * 2;\n        }\n        else {\n            return this.alpha2 * (2 - p * 2) + this.alpha3 * (p * 2 - 1);\n        }\n    }\n    getSize(curttl) {\n        const p = (this.ttl - curttl) / this.ttl;\n        if (p < 0.5) {\n            return this.size1 * (1 - p * 2) + this.size2 * p * 2;\n        }\n        else {\n            return this.size2 * (2 - p * 2) + this.size3 * (p * 2 - 1);\n        }\n    }\n    saveState() {\n        const res = {};\n        for (const field of this.fields) {\n            res[field.key] = this[field.key];\n        }\n        return res;\n    }\n    restoreState(state) {\n        for (const key in state) {\n            this[key] = state[key];\n        }\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/services/particles/particlesystem.ts\":\n/*!******************************************************!*\\\n  !*** ./src/app/services/particles/particlesystem.ts ***!\n  \\******************************************************/\n/*! exports provided: NumberField, ImageField */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NumberField\", function() { return NumberField; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImageField\", function() { return ImageField; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass NumberField {\n    constructor(key, name) {\n        this.key = key;\n        this.name = name;\n        this.type = 'number';\n    }\n}\nclass ImageField {\n    constructor(key, name) {\n        this.key = key;\n        this.name = name;\n        this.type = 'image';\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/services/project-data.service.ts\":\n/*!**************************************************!*\\\n  !*** ./src/app/services/project-data.service.ts ***!\n  \\**************************************************/\n/*! exports provided: ProjectDataService */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProjectDataService\", function() { return ProjectDataService; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _layer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layer */ \"./src/app/services/layer.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/app/services/utils.ts\");\n\n\n\n\nlet ProjectDataService = class ProjectDataService {\n    constructor() {\n        this.layers = [];\n        this.curColor = '#808080';\n        this.curZoom = 1;\n        this.curScrollLeft = 0;\n        this.curScrollTop = 0;\n        this.drawSize = 20;\n        this.width = 512;\n        this.height = 512;\n        this.windowChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"EventEmitter\"]();\n        this.layerSelectionChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"EventEmitter\"]();\n        this.layerContentChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"EventEmitter\"]();\n        this.blurEmitter = new _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"EventEmitter\"]();\n        this.renderedFrameEmitter = new _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"EventEmitter\"]();\n        /*this.layers.push(new Layer('Layer ' + this.layers.length));\n        this.curLayer = this.layers[0];*/\n        this.renderedFrameEmitter = new _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"EventEmitter\"]();\n    }\n    setColor(color) {\n        this.curColor = color;\n    }\n    setZoom(zoom) {\n        this.curZoom = zoom;\n        this.windowChanged.emit();\n    }\n    addLayer(layer) {\n        this.layers.push(layer);\n        if (layer.type === _layer__WEBPACK_IMPORTED_MODULE_2__[\"LayerType\"].MorphLayer) {\n            this.width = layer.getImage().width;\n            this.height = layer.getImage().height;\n        }\n        setTimeout(() => this.selectLayer(layer), 100);\n        setTimeout(() => this.selectLayer(layer), 200);\n        this.saveState();\n    }\n    selectLayer(layer) {\n        this.curLayer = layer;\n        if (this.curLayer.type === _layer__WEBPACK_IMPORTED_MODULE_2__[\"LayerType\"].MorphLayer) {\n            this.editorImage = this.curLayer.getFlowmap();\n        }\n        this.layerSelectionChange.emit();\n        this.saveState();\n    }\n    setFlowMap(canvas) {\n        if (this.curLayer.type === _layer__WEBPACK_IMPORTED_MODULE_2__[\"LayerType\"].MorphLayer) {\n            Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"drawCanvasToCanvas\"])(canvas, this.curLayer.getFlowmap());\n            this.curLayer.setFlowmap(this.curLayer.getFlowmap());\n            this.layerContentChange.emit();\n        }\n        this.saveState();\n    }\n    blurLayer(radius) {\n        this.blurEmitter.emit(radius);\n        this.saveState();\n    }\n    saveState() {\n        const layerState = [];\n        for (const layer of this.layers) {\n            layerState.push(layer.saveState());\n        }\n        const state = {\n            width: this.width,\n            height: this.height,\n            layers: layerState\n        };\n        console.log(state);\n    }\n    deleteCurrentLayer() {\n        if (this.curLayer) {\n            if (confirm('Are you sure you want to continue deleting this layer?')) {\n                for (let i = this.layers.length - 1; i >= 0; i--) {\n                    if (this.layers[i] === this.curLayer) {\n                        this.layers.splice(i, 1);\n                        if (this.layers.length > 0) {\n                            this.selectLayer(this.layers[Math.max(0, i - 1)]);\n                        }\n                        else {\n                            this.selectLayer(null);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    moveLayerDown() {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            if (this.layers[i] === this.curLayer) {\n                if (this.layers.length > 1 && i > 0) {\n                    this.layers[i] = this.layers[i - 1];\n                    this.layers[i - 1] = this.curLayer;\n                    break;\n                }\n            }\n        }\n        this.layerContentChange.emit();\n    }\n    moveLayerUp() {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            if (this.layers[i] === this.curLayer) {\n                if (this.layers.length > 1 && i < this.layers.length - 1) {\n                    this.layers[i] = this.layers[i + 1];\n                    this.layers[i + 1] = this.curLayer;\n                    break;\n                }\n            }\n        }\n        this.layerContentChange.emit();\n    }\n};\nProjectDataService = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injectable\"])({\n        providedIn: 'root'\n    })\n], ProjectDataService);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/services/utils.ts\":\n/*!***********************************!*\\\n  !*** ./src/app/services/utils.ts ***!\n  \\***********************************/\n/*! exports provided: createDefaultImage, drawCanvasToCanvas, imageUrlToCanvas */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createDefaultImage\", function() { return createDefaultImage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"drawCanvasToCanvas\", function() { return drawCanvasToCanvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"imageUrlToCanvas\", function() { return imageUrlToCanvas; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nfunction createDefaultImage(width, height) {\n    const tcanvas = document.createElement('canvas');\n    tcanvas.width = width;\n    tcanvas.height = height;\n    const tctx = tcanvas.getContext('2d');\n    tctx.fillStyle = '#808080';\n    tctx.fillRect(0, 0, tcanvas.width, tcanvas.height);\n    return tcanvas;\n}\nfunction drawCanvasToCanvas(from, to) {\n    to.width = from.width;\n    to.height = from.height;\n    const tctx = to.getContext('2d');\n    tctx.fillStyle = '#808080';\n    tctx.drawImage(from, 0, 0);\n}\nfunction imageUrlToCanvas(url) {\n    const img = new Image();\n    const tcanvas = document.createElement('canvas');\n    img.onload = () => {\n        tcanvas.width = img.width;\n        tcanvas.height = img.height;\n        const tctx = tcanvas.getContext('2d');\n        tctx.drawImage(img, 0, 0);\n    };\n    img.src = url;\n    return tcanvas;\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/tool-panel/direction-color-picker/direction-color-picker.component.css\":\n/*!****************************************************************************************!*\\\n  !*** ./src/app/tool-panel/direction-color-picker/direction-color-picker.component.css ***!\n  \\****************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Rvb2wtcGFuZWwvZGlyZWN0aW9uLWNvbG9yLXBpY2tlci9kaXJlY3Rpb24tY29sb3ItcGlja2VyLmNvbXBvbmVudC5jc3MifQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/tool-panel/direction-color-picker/direction-color-picker.component.ts\":\n/*!***************************************************************************************!*\\\n  !*** ./src/app/tool-panel/direction-color-picker/direction-color-picker.component.ts ***!\n  \\***************************************************************************************/\n/*! exports provided: DirectionColorPickerComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DirectionColorPickerComponent\", function() { return DirectionColorPickerComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/project-data.service */ \"./src/app/services/project-data.service.ts\");\n\n\n\nlet DirectionColorPickerComponent = class DirectionColorPickerComponent {\n    constructor(pds) {\n        this.pds = pds;\n        this.width = 100.0;\n        this.color = new _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"EventEmitter\"]();\n    }\n    updateImage() {\n        this.flowCanvas.nativeElement.width = this.width;\n        this.flowCanvas.nativeElement.height = this.width;\n        this.ctx = this.flowCanvas.nativeElement.getContext('2d');\n        this.ctx.fillStyle = '#808080';\n        this.ctx.fillRect(0, 0, this.flowCanvas.nativeElement.width, this.flowCanvas.nativeElement.height);\n        for (let d = 0; d < 360; d++) {\n            for (let r = this.width / 2; r >= 0; r--) {\n                this.ctx.beginPath();\n                this.ctx.moveTo(this.width / 2, this.width / 2);\n                this.ctx.lineTo(this.width / 2 - Math.cos(d / Math.PI * 180) * r, this.width / 2 - Math.sin(d / Math.PI * 180) * r);\n                let scale = (r) / (this.width / 2) * 128;\n                this.ctx.strokeStyle = 'rgb(' + (128 + Math.cos(d / Math.PI * 180) * scale) + \",\" + (128 + Math.sin(d / Math.PI * 180) * scale) + ',128)';\n                this.ctx.stroke();\n            }\n        }\n    }\n    ngAfterViewInit() {\n        this.flowCanvas.nativeElement.addEventListener('mousemove', (ev) => this.mousemove(ev));\n        this.flowCanvas.nativeElement.addEventListener('mousedown', (ev) => this.mousedown(ev));\n        this.flowCanvas.nativeElement.addEventListener('mouseup', (ev) => this.mouseup(ev));\n        this.updateImage();\n    }\n    mousemove(event) {\n        const rect = this.flowCanvas.nativeElement.getBoundingClientRect();\n        const mouseX = event.pageX - rect.left;\n        const mouseY = event.pageY - rect.top;\n    }\n    mousedown(event) {\n        const rect = this.flowCanvas.nativeElement.getBoundingClientRect();\n        const mouseX = event.pageX - rect.left;\n        const mouseY = event.pageY - rect.top;\n        let p = this.ctx.getImageData(mouseX, mouseY, 1, 1).data;\n        const selCol = 'rgb(' + p[0] + ',' + p[1] + ',' + p[2] + ')';\n        this.color.emit(selCol);\n        this.pds.setColor(selCol);\n    }\n    mouseup(event) {\n    }\n    ngOnInit() {\n    }\n};\nDirectionColorPickerComponent.ctorParameters = () => [\n    { type: _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__[\"ProjectDataService\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])('canvas', { static: false, read: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"] })\n], DirectionColorPickerComponent.prototype, \"flowCanvas\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Output\"])()\n], DirectionColorPickerComponent.prototype, \"color\", void 0);\nDirectionColorPickerComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-direction-color-picker',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./direction-color-picker.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/tool-panel/direction-color-picker/direction-color-picker.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./direction-color-picker.component.css */ \"./src/app/tool-panel/direction-color-picker/direction-color-picker.component.css\")).default]\n    })\n], DirectionColorPickerComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/tool-panel/tool-panel.component.css\":\n/*!*****************************************************!*\\\n  !*** ./src/app/tool-panel/tool-panel.component.css ***!\n  \\*****************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#dialogBack.hidden {\\n  display: none;\\n}\\n\\n#dialogBack {\\n  position: fixed;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n  min-width: 300px;\\n  min-height: 200px;\\n  background: rgba(0,0,0,0.2);\\n  z-index: 1000;\\n  display: grid;\\n}\\n\\n#newLayerDialog {\\n  width: 300px;\\n  margin-right: auto;\\n  padding: 1rem;\\n  background-color: white;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdG9vbC1wYW5lbC90b29sLXBhbmVsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsT0FBTztFQUNQLE1BQU07RUFDTixXQUFXO0VBQ1gsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixpQkFBaUI7RUFDakIsMkJBQTJCO0VBQzNCLGFBQWE7RUFDYixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGFBQWE7RUFDYix1QkFBdUI7QUFDekIiLCJmaWxlIjoic3JjL2FwcC90b29sLXBhbmVsL3Rvb2wtcGFuZWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIiNkaWFsb2dCYWNrLmhpZGRlbiB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNkaWFsb2dCYWNrIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIG1pbi13aWR0aDogMzAwcHg7XG4gIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMik7XG4gIHotaW5kZXg6IDEwMDA7XG4gIGRpc3BsYXk6IGdyaWQ7XG59XG5cbiNuZXdMYXllckRpYWxvZyB7XG4gIHdpZHRoOiAzMDBweDtcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBwYWRkaW5nOiAxcmVtO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn1cbiJdfQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/tool-panel/tool-panel.component.ts\":\n/*!****************************************************!*\\\n  !*** ./src/app/tool-panel/tool-panel.component.ts ***!\n  \\****************************************************/\n/*! exports provided: ToolPanelComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ToolPanelComponent\", function() { return ToolPanelComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/project-data.service */ \"./src/app/services/project-data.service.ts\");\n\n\n\nlet ToolPanelComponent = class ToolPanelComponent {\n    constructor(pds) {\n        this.pds = pds;\n        this.renderLayerVisible = false;\n        this.running = false;\n        this.isWorkerLoaded = false;\n        this.isSupported = (function () {\n            return document.querySelector && window.URL && window.Worker;\n        })();\n    }\n    ngOnInit() {\n    }\n    zoom(factor) {\n        this.pds.setZoom(this.pds.curZoom * factor);\n    }\n    changePenSize(event) {\n        console.log(event);\n        this.pds.drawSize = event.target.value;\n    }\n    blur() {\n        const radius = parseInt(prompt('Please enter blur radius', '10'), 10);\n        this.pds.blurLayer(radius);\n    }\n    renderDialog() {\n        this.renderLayerVisible = true;\n    }\n    render() {\n        const time = parseInt(document.getElementById('renderTime').value, 10);\n        const frames = time * 30;\n        const images = [];\n        let renderStarted = false;\n        const canvas = document.getElementById('CanvasFinal');\n        this.pds.renderedFrameEmitter.subscribe(() => {\n            if (images.length < frames) {\n                const timg = new Image();\n                timg.src = canvas.toDataURL();\n                images.push(timg);\n            }\n            else if (!renderStarted) {\n                renderStarted = true;\n                this.startRender(images);\n                console.log(images);\n            }\n        });\n    }\n    startRender(images) {\n        this.initWorker();\n        this.ffmpeg(images);\n    }\n    initWorker() {\n        this.outputElement = document.getElementById('outputElement');\n        this.worker = new Worker('assets/worker-asm.js');\n        this.worker.onmessage = (event) => {\n            const message = event.data;\n            if (message.type == 'ready') {\n                this.isWorkerLoaded = true;\n                this.worker.postMessage({\n                    type: 'command',\n                    arguments: ['-help']\n                });\n            }\n            else if (message.type === 'stdout') {\n                //this.outputElement.innerHTML += message.data + '\\n';\n            }\n            else if (message.type === 'start') {\n                //this.outputElement.innerHTML = 'Worker has received command\\n';\n            }\n            else if (message.type === 'done') {\n                const buffers = message.data;\n                if (buffers.length) {\n                    this.outputElement.className = 'closed';\n                }\n                buffers.forEach((file) => {\n                    console.log(this.getDownloadLink(file.data, file.name));\n                    this.outputElement.appendChild(this.getDownloadLink(file.data, file.name));\n                });\n            }\n        };\n    }\n    parseArguments(text) {\n        text = text.replace(/\\s+/g, ' ');\n        let args = [];\n        // Allow double quotes to not split args.\n        text.split('\"').forEach(function (t, i) {\n            t = t.trim();\n            if ((i % 2) === 1) {\n                args.push(t);\n            }\n            else {\n                args = args.concat(t.split(' '));\n            }\n        });\n        return args;\n    }\n    ffmpeg(frames) {\n        const text = '-framerate 30 -i img%03d.jpeg -c:v libx264 -vf fps=25 -pix_fmt yuv420p out.mp4';\n        const args = this.parseArguments(text);\n        console.log(args);\n        const tempFiles = [];\n        for (let i = 0; i < frames.length; i++) {\n            tempFiles.push({\n                name: 'img' + this.lpad(i, 3) + '.jpeg',\n                data: this.imagetoUint8(frames[i])\n            });\n        }\n        this.worker.postMessage({\n            type: 'command',\n            arguments: args,\n            files: tempFiles\n        });\n    }\n    lpad(value, padding) {\n        const zeroes = new Array(padding + 1).join('0');\n        return (zeroes + value).slice(-padding);\n    }\n    imagetoUint8(img) {\n        const cv = document.createElement('canvas');\n        cv.width = img.naturalWidth; // or 'width' if you want a special/scaled size\n        cv.height = img.naturalHeight; // or 'height' if you want a special/scaled size\n        cv.getContext('2d').drawImage(img, 0, 0);\n        const dataUrl = cv.toDataURL('image/jpeg');\n        return this.dataURLtoUint8(dataUrl);\n    }\n    dataURLtoFile(dataurl, filename) {\n        let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1], bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n        while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n        }\n        return new File([u8arr], filename, { type: mime });\n    }\n    dataURLtoUint8(dataurl) {\n        let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1], bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n        while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n        }\n        return u8arr;\n    }\n    getDownloadLink(fileData, fileName) {\n        if (fileName.match(/\\.jpeg|\\.gif|\\.jpg|\\.png/)) {\n            const blob = new Blob([fileData]);\n            const src = window.URL.createObjectURL(blob);\n            const img = document.createElement('img');\n            img.src = src;\n            return img;\n        }\n        else {\n            const a = document.createElement('a');\n            a.download = fileName;\n            const blob = new Blob([fileData]);\n            const src = window.URL.createObjectURL(blob);\n            a.href = src;\n            a.innerHTML = 'Click here to download ' + fileName + '!';\n            return a;\n        }\n    }\n    closeDialog(event) {\n        this.renderLayerVisible = false;\n        event.stopPropagation();\n    }\n};\nToolPanelComponent.ctorParameters = () => [\n    { type: _services_project_data_service__WEBPACK_IMPORTED_MODULE_2__[\"ProjectDataService\"] }\n];\nToolPanelComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-tool-panel',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./tool-panel.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/tool-panel/tool-panel.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./tool-panel.component.css */ \"./src/app/tool-panel/tool-panel.component.css\")).default]\n    })\n], ToolPanelComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/environments/environment.ts\":\n/*!*****************************************!*\\\n  !*** ./src/environments/environment.ts ***!\n  \\*****************************************/\n/*! exports provided: environment */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"environment\", function() { return environment; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nconst environment = {\n    production: false\n};\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n\n\n/***/ }),\n\n/***/ \"./src/main.ts\":\n/*!*********************!*\\\n  !*** ./src/main.ts ***!\n  \\*********************/\n/*! no exports provided */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ \"./node_modules/@angular/platform-browser-dynamic/fesm2015/platform-browser-dynamic.js\");\n/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/app.module */ \"./src/app/app.module.ts\");\n/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./environments/environment */ \"./src/environments/environment.ts\");\n\n\n\n\n\nif (_environments_environment__WEBPACK_IMPORTED_MODULE_4__[\"environment\"].production) {\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"enableProdMode\"])();\n}\nObject(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__[\"platformBrowserDynamic\"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_3__[\"AppModule\"])\n    .catch(err => console.error(err));\n\n\n/***/ }),\n\n/***/ 0:\n/*!***************************!*\\\n  !*** multi ./src/main.ts ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! /home/nils/WebstormProjects/sedart/src/main.ts */\"./src/main.ts\");\n\n\n/***/ })\n\n},[[0,\"runtime\",\"vendor\"]]]);\n//# sourceMappingURL=main-es2015.js.map","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","export default \"<div class=\\\"mainFlex\\\">\\n  <app-editor-panel [ngClass]=\\\"{'hidden': !pds.curLayer || pds.curLayer.type !== LayerType.MorphLayer}\\\"  class=\\\"flexGrow  card roundPanel\\\" (scroll)=\\\"scroll($event)\\\" #editorPanel></app-editor-panel>\\n  <app-particle-editor [ngClass]=\\\"{'hidden': !pds.curLayer || pds.curLayer.type !== LayerType.ParticleLayer}\\\"  class=\\\"flexGrow  card roundPanel\\\" #editorPanel></app-particle-editor>\\n  <div class=\\\"centerPanel\\\">\\n    <app-tool-panel class=\\\"flexGrow roundPanel card\\\"></app-tool-panel>\\n    <app-layer-panel class=\\\"flexGrow roundPanel card\\\"></app-layer-panel>\\n  </div>\\n  <app-preview-panel class=\\\"flexGrow roundPanel card\\\" (scroll)=\\\"scroll($event)\\\" #previewPanel></app-preview-panel>\\n</div>\\n\"","export default \"<canvas id=\\\"previewCanvas\\\" #previewCanvas></canvas>\\n<canvas #flowmapCanvas style=\\\"display: none;\\\"></canvas>\\n\"","export default \"<div class=\\\"flexContainer\\\">\\n  <div class=\\\"layers\\\">\\n    <app-layer-select *ngFor=\\\"let layer of pds.layers\\\" [layer]=\\\"layer\\\"></app-layer-select>\\n  </div>\\n  <div class=\\\"toolbar\\\">\\n    <button type=\\\"button\\\" (click)=\\\"newLayerVisible=true\\\">+</button>\\n    <button style=\\\"float: right;\\\" (click)=\\\"pds.moveLayerDown();\\\"> down </button>\\n    <button style=\\\"float: right;\\\" (click)=\\\"pds.moveLayerUp();\\\"> up </button>\\n    <button style=\\\"float: right;\\\" (click)=\\\"pds.deleteCurrentLayer();\\\"> X </button>\\n  </div>\\n</div>\\n<div id=\\\"dialogBack\\\" (click)=\\\"newLayerVisible = false;\\\" [ngClass]=\\\"{'hidden':!newLayerVisible}\\\">\\n  <div id=\\\"newLayerDialog\\\" (click)=\\\"$event.stopPropagation()\\\">\\n    <button type=\\\"button\\\" (click)=\\\"selectLayerType('morph')\\\">MorphLayer</button>\\n    <button type=\\\"button\\\" (click)=\\\"selectLayerType('particle')\\\">ParticleLayer</button><br>\\n    <hr>\\n    <label>Layer Name:</label><br/>\\n    <input type=\\\"text\\\" placeholder=\\\"Enter layer name\\\" #layerNameInput/> <br/><br/>\\n    <div id=\\\"morphInput\\\">\\n      <select id=\\\"morphType\\\" size=\\\"2\\\">\\n          <option selected>flow</option>\\n          <option>wave</option>\\n      </select><br><br>\\n      <label>Image File:</label><br/>\\n      <input type=\\\"file\\\" #imageLoader name=\\\"imageLoader\\\"/><br><br>\\n      <canvas #imageCanvas></canvas><br>\\n      <button type=\\\"button\\\" style=\\\"float: right;\\\" (click)=\\\"createLayer()\\\">create new layer</button>\\n    </div>\\n\\n    <div id=\\\"particleInput\\\" style=\\\"display: none;\\\"><br><br>\\n      <button type=\\\"button\\\" style=\\\"float: right;\\\"  (click)=\\\"createParticleLayer()\\\">create new particle layer</button>\\n    </div>\\n\\n\\n  </div>\\n</div>\\n\"","export default \"<div (click)=\\\"selectLayer()\\\" class=\\\"host\\\" [ngClass]=\\\"{'selected': pds.curLayer == layer}\\\">\\n  {{layer.name}}\\n</div>\\n\"","export default \"<div *ngFor=\\\"let emitter of getParticleLayer().emitters\\\">\\n  <b>{{emitter.readableName}}</b>\\n  <div *ngFor=\\\"let field of emitter.fields\\\">\\n    {{field.name}}: <input value=\\\"{{emitter[field.key]}}\\\" (change)=\\\"updateEmitter(emitter, field.key, $event)\\\">\\n  </div>\\n\\n</div>\\n<div *ngFor=\\\"let pf of getParticleLayer().particleFactories\\\">\\n  <b>{{pf.readableName}}</b>\\n  <div *ngFor=\\\"let field of pf.fields\\\">\\n    <ng-container *ngIf=\\\"field.type === 'number'\\\">\\n      {{field.name}}: <input value=\\\"{{pf[field.key]}}\\\" (change)=\\\"updateEmitter(pf, field.key, $event)\\\">\\n    </ng-container>\\n    <ng-container *ngIf=\\\"field.type === 'image'\\\">\\n      <label>{{field.name}}:</label><br/>\\n      <input type=\\\"file\\\" #imageLoader name=\\\"imageLoader\\\" (change)=\\\"updateImage(pf, field.key, $event)\\\"/><br>\\n    </ng-container>\\n  </div>\\n\\n</div>\\n\"","export default \"<canvas id=\\\"CanvasFinal\\\" style=\\\"background-color: #aaaaaa\\\" #CanvasFinal></canvas>\\n\"","export default \"<canvas #canvas></canvas>\\n\"","export default \"Select direction:\\n<app-direction-color-picker></app-direction-color-picker><br><br>\\nZoom:<br>\\n<button type=\\\"button\\\" (click)=\\\"zoom(1.2)\\\">+</button>\\n<button type=\\\"button\\\" (click)=\\\"zoom(1/1.2)\\\">-</button><br><br>\\nBrush size:<br>\\n<input type=\\\"range\\\" min=\\\"1\\\" max=\\\"100\\\" value=\\\"20\\\" (change)=\\\"changePenSize($event);\\\"/><br><br>\\n\\n<button type=\\\"button\\\" (click)=\\\"blur()\\\">blur</button><br><br>\\n<button type=\\\"button\\\" (click)=\\\"renderDialog()\\\">render</button>\\n\\n<div id=\\\"dialogBack\\\" (click)=\\\"closeDialog($event)\\\" [ngClass]=\\\"{'hidden':!renderLayerVisible}\\\">\\n  <div id=\\\"newLayerDialog\\\" (click)=\\\"$event.stopPropagation()\\\">\\n    <h1>Render video</h1>\\n    <input type=\\\"number\\\" id=\\\"renderTime\\\"/> seconds<br><br>\\n    <button type=\\\"button\\\" (click)=\\\"render()\\\">render</button>\\n    <div id=\\\"outputElement\\\">\\n\\n    </div>\\n  </div>\\n</div>\\n\"","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export default \".mainFlex {\\n  position: absolute;\\n  display: flex;\\n  width: 100%;\\n  top: 0px;\\n  bottom: 0px;\\n}\\n\\n.centerPanel {\\n  display: flex;\\n  width: 200px;\\n  flex-direction: column;\\n}\\n\\n.flexGrow {\\n  flex-grow: 1;\\n  flex-basis: 0;\\n  overflow: auto;\\n}\\n\\n.roundPanel {\\n  margin: 1rem;\\n  padding: 1rem;\\n  background: lightgray;\\n  border: 1px solid gray;\\n  border-radius: 0.2rem;\\n}\\n\\n.rectPanel {\\n  margin: 1rem;\\n  padding: 1rem;\\n  background: lightgray;\\n  border: 1px solid gray;\\n}\\n\\n.hidden {\\n  display: none;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLFdBQVc7RUFDWCxRQUFRO0VBQ1IsV0FBVztBQUNiOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFlBQVk7RUFDWixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLHFCQUFxQjtFQUNyQixzQkFBc0I7RUFDdEIscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYixxQkFBcUI7RUFDckIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsYUFBYTtBQUNmIiwiZmlsZSI6InNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbkZsZXgge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAxMDAlO1xuICB0b3A6IDBweDtcbiAgYm90dG9tOiAwcHg7XG59XG5cbi5jZW50ZXJQYW5lbCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAyMDBweDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuLmZsZXhHcm93IHtcbiAgZmxleC1ncm93OiAxO1xuICBmbGV4LWJhc2lzOiAwO1xuICBvdmVyZmxvdzogYXV0bztcbn1cblxuLnJvdW5kUGFuZWwge1xuICBtYXJnaW46IDFyZW07XG4gIHBhZGRpbmc6IDFyZW07XG4gIGJhY2tncm91bmQ6IGxpZ2h0Z3JheTtcbiAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcbiAgYm9yZGVyLXJhZGl1czogMC4ycmVtO1xufVxuXG4ucmVjdFBhbmVsIHtcbiAgbWFyZ2luOiAxcmVtO1xuICBwYWRkaW5nOiAxcmVtO1xuICBiYWNrZ3JvdW5kOiBsaWdodGdyYXk7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XG59XG5cbi5oaWRkZW4ge1xuICBkaXNwbGF5OiBub25lO1xufVxuIl19 */\"","import {Component, ElementRef, ViewChild} from '@angular/core';\nimport {ProjectDataService} from './services/project-data.service';\nimport {LayerType} from './services/layer';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'sedart';\n\n\n  @ViewChild('previewPanel', {static: false, read: ElementRef}) previewPanel: ElementRef;\n  @ViewChild('editorPanel', {static: false, read: ElementRef}) editorPanel: ElementRef;\n  LayerType = LayerType;\n\n  constructor(private pds: ProjectDataService) {\n  }\n\n  scroll(e) {\n    this.pds.curScrollLeft = e.srcElement.scrollLeft;\n    this.pds.curScrollTop = e.srcElement.scrollTop;\n\n    setTimeout(() => {\n      if (this.editorPanel.nativeElement.scrollTop !== this.pds.curScrollTop || this.editorPanel.nativeElement.scrollLeft !== this.pds.curScrollLeft) {\n        this.editorPanel.nativeElement.scrollTop = this.pds.curScrollTop;\n        this.editorPanel.nativeElement.scrollLeft = this.pds.curScrollLeft;\n      } else {\n        this.previewPanel.nativeElement.scrollTop = this.pds.curScrollTop;\n        this.previewPanel.nativeElement.scrollLeft = this.pds.curScrollLeft;\n      }\n    }, 0);\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { LayerPanelComponent } from './layer-panel/layer-panel.component';\nimport { EditorPanelComponent } from './editor-panel/editor-panel.component';\nimport { PreviewPanelComponent } from './preview-panel/preview-panel.component';\nimport { ToolPanelComponent } from './tool-panel/tool-panel.component';\nimport { DirectionColorPickerComponent } from './tool-panel/direction-color-picker/direction-color-picker.component';\nimport { LayerSelectComponent } from './layer-panel/layer-select/layer-select.component';\nimport { ParticleEditorComponent } from './particle-editor/particle-editor.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    LayerPanelComponent,\n    EditorPanelComponent,\n    PreviewPanelComponent,\n    ToolPanelComponent,\n    DirectionColorPickerComponent,\n    LayerSelectComponent,\n    ParticleEditorComponent\n  ],\n  imports: [\n    BrowserModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","export default \"#previewCanvas {\\n  transition: 0.3s ease-in-out;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZWRpdG9yLXBhbmVsL2VkaXRvci1wYW5lbC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNEJBQTRCO0FBQzlCIiwiZmlsZSI6InNyYy9hcHAvZWRpdG9yLXBhbmVsL2VkaXRvci1wYW5lbC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI3ByZXZpZXdDYW52YXMge1xuICB0cmFuc2l0aW9uOiAwLjNzIGVhc2UtaW4tb3V0O1xufVxuXG4iXX0= */\"","import {AfterViewInit, Component, ElementRef, EventEmitter, OnInit, Output, ViewChild} from '@angular/core';\nimport {ProjectDataService} from '../services/project-data.service';\nimport {LayerType} from '../services/layer';\nimport {MorphLayer} from '../services/morphlayer';\n\n@Component({\n  selector: 'app-editor-panel',\n  templateUrl: './editor-panel.component.html',\n  styleUrls: ['./editor-panel.component.css']\n})\nexport class EditorPanelComponent implements OnInit, AfterViewInit {\n  @ViewChild('previewCanvas', {static: false, read: ElementRef}) previewCanvas: ElementRef;\n  @ViewChild('flowmapCanvas', {static: false, read: ElementRef}) flowmapCanvas: ElementRef;\n  previewCtx: CanvasRenderingContext2D;\n  flowmapCtx: CanvasRenderingContext2D;\n  paint = false;\n  mouseover = false;\n  radius = 20;\n  image: HTMLImageElement;\n  origImage: HTMLImageElement;\n  current = {x: 0, y: 0, zoom: 1};\n  curZoom = 1;\n\n  @Output() scrollSync: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor(private pds: ProjectDataService) {\n  }\n\n  ngOnInit() {\n  }\n\n  updateImage() {\n    if (!this.pds.curLayer || this.pds.curLayer.type !== LayerType.MorphLayer) {\n      return;\n    }\n    const image = this.pds.editorImage;\n\n    this.previewCanvas.nativeElement.width = image.width;\n    this.previewCanvas.nativeElement.height = image.height;\n\n    this.flowmapCanvas.nativeElement.width = image.width;\n    this.flowmapCanvas.nativeElement.height = image.height;\n\n    this.previewCtx = this.previewCanvas.nativeElement.getContext('2d');\n    this.flowmapCtx = this.flowmapCanvas.nativeElement.getContext('2d');\n\n    this.flowmapCtx.fillStyle = '#808080';\n    this.flowmapCtx.fillRect(0, 0, this.previewCanvas.nativeElement.width, this.previewCanvas.nativeElement.height);\n    if (this.pds.editorImage) {\n      this.flowmapCtx.drawImage(this.pds.editorImage, 0, 0); // Or at whatever offset you like\n      this.previewCtx.drawImage(this.pds.editorImage, 0, 0); // Or at whatever offset you like\n    }\n\n    this.updatePreviewImage(-10, -10);\n  }\n\n  ngAfterViewInit(): void {\n    this.updateImage();\n    this.pds.layerSelectionChange.subscribe(() => this.updateImage());\n    this.pds.blurEmitter.subscribe(n => this.blur(n));\n    this.previewCanvas.nativeElement.addEventListener('mousemove', (ev) => this.mousemove(ev));\n    this.previewCanvas.nativeElement.addEventListener('mousedown', (ev) => this.mousedown(ev));\n    this.previewCanvas.nativeElement.addEventListener('mouseup', (ev) => this.mouseup(ev));\n    this.previewCanvas.nativeElement.addEventListener('mouseenter', (ev) => this.mouseover = true);\n    this.previewCanvas.nativeElement.addEventListener('mouseleave', (ev) => {\n      this.mouseover = false;\n      this.updatePreviewImage(-10, -10);\n    });\n\n    this.windowChanged();\n    this.pds.windowChanged.subscribe((e) => this.windowChanged());\n\n    this.updatePreviewImage(-20, -20);\n  }\n\n  mousemove(e) {\n    if (e.button === 0) {\n      const mouseX = (e.offsetX != null) ? e.offsetX : e.originalEvent.layerX;\n      const mouseY = (e.offsetY != null) ? e.offsetY : e.originalEvent.layerY;\n      this.drawAtPos(mouseX, mouseY);\n      this.updatePreviewImage(mouseX, mouseY);\n    }\n\n  }\n\n  mousedown(e) {\n    if (e.button === 0) {\n      this.paint = true;\n      const rect = this.previewCanvas.nativeElement.getBoundingClientRect();\n      const mouseX = (e.offsetX != null) ? e.offsetX : e.originalEvent.layerX;\n      const mouseY = (e.offsetY != null) ? e.offsetY : e.originalEvent.layerY;\n      this.drawAtPos(mouseX, mouseY);\n      this.updatePreviewImage(mouseX, mouseY);\n    }\n  }\n\n  mouseup(e) {\n    if (e.button === 0) {\n      this.paint = false;\n      this.pds.setFlowMap(this.flowmapCanvas.nativeElement);\n    }\n  }\n\n  blur(r) {\n    const c = this.flowmapCanvas.nativeElement;\n    const ctx = this.flowmapCtx;\n    ctx.filter = 'blur(' + r + 'px)';\n    ctx.drawImage(c, 0, 0);\n    ctx.filter = 'none';\n\n    this.pds.setFlowMap(this.flowmapCanvas.nativeElement);\n    this.updatePreviewImage(-20, -20);\n\n\n  }\n\n  windowChanged() {\n    this.curZoom = this.pds.curZoom;\n    this.previewCanvas.nativeElement.style.transform = 'scale(' + this.curZoom + ')';\n    this.previewCanvas.nativeElement.style.transformOrigin = 'top left';\n  }\n\n  private updatePreviewImage(mouseX: number, mouseY: number) {\n    if (!this.pds.curLayer) {\n      return;\n    }\n    this.previewCtx.globalAlpha = 1;\n    this.previewCtx.drawImage(this.flowmapCanvas.nativeElement, 0, 0);\n\n    if (this.pds.curLayer.type === LayerType.MorphLayer && (this.pds.curLayer as MorphLayer).getImage()) {\n      this.previewCtx.globalAlpha = 0.2;\n      this.previewCtx.drawImage((this.pds.curLayer as MorphLayer).getImage(), 0, 0);\n    }\n    this.previewCtx.globalAlpha = 1;\n\n    if (this.mouseover) {\n      this.previewCtx.beginPath();\n      this.previewCtx.arc(mouseX, mouseY, this.pds.drawSize, 0, 2 * Math.PI);\n      this.previewCtx.strokeStyle = this.pds.curColor;\n      this.previewCtx.stroke();\n    }\n  }\n\n  private drawAtPos(mouseX: number, mouseY: number) {\n    if (this.paint) {\n      for (let r = this.pds.drawSize; r > 0; r--) {\n        this.flowmapCtx.globalAlpha = (this.pds.drawSize - r) / this.pds.drawSize;\n        this.flowmapCtx.beginPath();\n        this.flowmapCtx.arc(mouseX, mouseY, r, 0, 2 * Math.PI);\n        this.flowmapCtx.fillStyle = this.pds.curColor;\n        this.flowmapCtx.fill();\n      }\n      this.flowmapCtx.globalAlpha = 1;\n    }\n  }\n\n}\n","export default \".flexContainer {\\n  display: flex;\\n  height: 100%;\\n  width: 100%;\\n  flex-direction: column;\\n}\\n\\n.toolbar {\\n  margin-top: 1rem;\\n}\\n\\n.layers {\\n  flex-grow: 1;\\n  display: flex;\\n  flex-direction: column-reverse;\\n  overflow: auto;\\n  padding: 0.2rem;\\n  background: rgba(255,255,255, 0.2);\\n}\\n\\n#dialogBack.hidden {\\n  display: none;\\n}\\n\\n#dialogBack {\\n  position: fixed;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n  min-width: 300px;\\n  min-height: 200px;\\n  background: rgba(0,0,0,0.2);\\n  z-index: 1000;\\n  display: grid;\\n}\\n\\n#newLayerDialog {\\n  width: 300px;\\n  margin-right: auto;\\n  padding: 1rem;\\n  background-color: white;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbGF5ZXItcGFuZWwvbGF5ZXItcGFuZWwuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYixZQUFZO0VBQ1osV0FBVztFQUNYLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLGNBQWM7RUFDZCxlQUFlO0VBQ2Ysa0NBQWtDO0FBQ3BDOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsZUFBZTtFQUNmLE9BQU87RUFDUCxNQUFNO0VBQ04sV0FBVztFQUNYLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLDJCQUEyQjtFQUMzQixhQUFhO0VBQ2IsYUFBYTtBQUNmOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsdUJBQXVCO0FBQ3pCIiwiZmlsZSI6InNyYy9hcHAvbGF5ZXItcGFuZWwvbGF5ZXItcGFuZWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5mbGV4Q29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuLnRvb2xiYXIge1xuICBtYXJnaW4tdG9wOiAxcmVtO1xufVxuXG4ubGF5ZXJzIHtcbiAgZmxleC1ncm93OiAxO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7XG4gIG92ZXJmbG93OiBhdXRvO1xuICBwYWRkaW5nOiAwLjJyZW07XG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsIDAuMik7XG59XG5cbiNkaWFsb2dCYWNrLmhpZGRlbiB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNkaWFsb2dCYWNrIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIG1pbi13aWR0aDogMzAwcHg7XG4gIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMik7XG4gIHotaW5kZXg6IDEwMDA7XG4gIGRpc3BsYXk6IGdyaWQ7XG59XG5cbiNuZXdMYXllckRpYWxvZyB7XG4gIHdpZHRoOiAzMDBweDtcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBwYWRkaW5nOiAxcmVtO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn1cbiJdfQ== */\"","import {AfterViewInit, Component, ElementRef, OnInit, ViewChild} from '@angular/core';\nimport {ProjectDataService} from '../services/project-data.service';\nimport {MorphLayer} from '../services/morphlayer';\nimport {ParticleLayer} from '../services/particlelayer';\n\n@Component({\n  selector: 'app-layer-panel',\n  templateUrl: './layer-panel.component.html',\n  styleUrls: ['./layer-panel.component.css']\n})\nexport class LayerPanelComponent implements OnInit, AfterViewInit {\n\n  @ViewChild('layerNameInput', {static: false, read: ElementRef}) layerNameInput: ElementRef;\n  @ViewChild('imageLoader', {static: false, read: ElementRef}) imageLoader: ElementRef;\n  @ViewChild('imageCanvas', {static: false, read: ElementRef}) canvas: ElementRef;\n  ctx: CanvasRenderingContext2D;\n  newLayerVisible = false;\n\n  constructor(private pds: ProjectDataService) {\n  }\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n    this.imageLoader.nativeElement.addEventListener('change', (event) => {\n      this.handleImage(event);\n    }, false);\n    this.ctx = this.canvas.nativeElement.getContext('2d');\n  }\n\n  handleImage(e) {\n    const selfRef = this;\n    const reader = new FileReader();\n    reader.onload = (event: any) => {\n      const img = new Image();\n      img.onload = () => {\n        selfRef.canvas.nativeElement.style.width = '200px';\n        selfRef.canvas.nativeElement.width = img.width;\n        selfRef.canvas.nativeElement.height = img.height;\n        selfRef.ctx.drawImage(img, 0, 0);\n        //selfRef.dataService.setImage(img);\n\n        const tcanvas = document.createElement('canvas');\n        tcanvas.width = img.width;\n        tcanvas.height = img.height;\n        const tctx = tcanvas.getContext('2d');\n        tctx.fillStyle = '#808080';\n        tctx.fillRect(0, 0, tcanvas.width, tcanvas.height);\n\n        //selfRef.dataService.setFlowMap(tcanvas.toDataURL('image/png'));\n\n      };\n      img.src = event.target.result;\n    };\n    reader.readAsDataURL(e.target.files[0]);\n  }\n\n  createLayer() {\n    const tc = document.createElement('canvas');\n    tc.width = (this.canvas as any).nativeElement.width;\n    tc.height = (this.canvas as any).nativeElement.height;\n    /*tc.width = 1024;\n    tc.height = 1024;*/\n    const tctx = tc.getContext('2d');\n    tctx.drawImage(this.canvas.nativeElement, 0, 0, this.canvas.nativeElement.width, this.canvas.nativeElement.height, 0, 0, tc.width, tc.height);\n\n    this.pds.addLayer(new MorphLayer(this.layerNameInput.nativeElement.value, (document.getElementById('morphType') as any).value, tc));\n    this.newLayerVisible = false;\n  }\n\n  createParticleLayer() {\n    this.pds.addLayer(new ParticleLayer(this.layerNameInput.nativeElement.value, 512, 512));\n    this.newLayerVisible = false;\n  }\n\n  selectLayerType(select: string) {\n    if (select === 'morph') {\n      document.getElementById('morphInput').style.display = 'block';\n      document.getElementById('particleInput').style.display = 'none';\n    } else {\n      document.getElementById('morphInput').style.display = 'none';\n      document.getElementById('particleInput').style.display = 'block';\n    }\n  }\n}\n","export default \".host {\\n  border: 1px solid gray;\\n  padding: 0.2rem;\\n  display: block;\\n  cursor: pointer;\\n  background-color: white;\\n}\\n\\n.selected{\\n  background-color: aliceblue;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbGF5ZXItcGFuZWwvbGF5ZXItc2VsZWN0L2xheWVyLXNlbGVjdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixjQUFjO0VBQ2QsZUFBZTtFQUNmLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLDJCQUEyQjtBQUM3QiIsImZpbGUiOiJzcmMvYXBwL2xheWVyLXBhbmVsL2xheWVyLXNlbGVjdC9sYXllci1zZWxlY3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5ob3N0IHtcbiAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcbiAgcGFkZGluZzogMC4ycmVtO1xuICBkaXNwbGF5OiBibG9jaztcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn1cblxuLnNlbGVjdGVke1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBhbGljZWJsdWU7XG59XG4iXX0= */\"","import {Component, Input, OnInit} from '@angular/core';\nimport {Layer} from '../../services/layer';\nimport {ProjectDataService} from '../../services/project-data.service';\n\n@Component({\n  selector: 'app-layer-select',\n  templateUrl: './layer-select.component.html',\n  styleUrls: ['./layer-select.component.css']\n})\nexport class LayerSelectComponent implements OnInit {\n\n  @Input() layer: Layer;\n\n  constructor(private pds: ProjectDataService) { }\n\n  ngOnInit() {\n  }\n\n  selectLayer() {\n    this.pds.selectLayer(this.layer);\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhcnRpY2xlLWVkaXRvci9wYXJ0aWNsZS1lZGl0b3IuY29tcG9uZW50LmNzcyJ9 */\"","import {Component, OnInit} from '@angular/core';\nimport {ProjectDataService} from '../services/project-data.service';\nimport {ParticleLayer} from '../services/particlelayer';\nimport {Emitter} from '../services/particles/emitter';\n\n@Component({\n  selector: 'app-particle-editor',\n  templateUrl: './particle-editor.component.html',\n  styleUrls: ['./particle-editor.component.css']\n})\nexport class ParticleEditorComponent implements OnInit {\n\n  constructor(public pds: ProjectDataService) {\n  }\n\n  ngOnInit() {\n  }\n\n  getParticleLayer() {\n    return this.pds.curLayer ? (this.pds.curLayer as ParticleLayer) : [];\n  }\n\n  updateEmitter(emitter: Emitter, key: string, event: Event) {\n    emitter[key] = parseFloat((event.target as any).value);\n  }\n\n  updateImage(emitter: Emitter, key: string, e: any) {\n    const selfRef = this;\n    const reader = new FileReader();\n    reader.onload = (event: any) => {\n      const img = new Image();\n      img.onload = () => {\n        const tcanvas = document.createElement('canvas');\n        tcanvas.width = img.width;\n        tcanvas.height = img.height;\n        const tctx = tcanvas.getContext('2d');\n        tctx.drawImage(img, 0, 0);\n\n        emitter[key] = tcanvas;\n\n      };\n      img.src = event.target.result;\n    };\n    reader.readAsDataURL(e.target.files[0]);\n  }\n\n}\n","export default \"#CanvasFinal {\\n  transition: 0.3s ease-in-out;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcHJldmlldy1wYW5lbC9wcmV2aWV3LXBhbmVsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw0QkFBNEI7QUFDOUIiLCJmaWxlIjoic3JjL2FwcC9wcmV2aWV3LXBhbmVsL3ByZXZpZXctcGFuZWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIiNDYW52YXNGaW5hbCB7XG4gIHRyYW5zaXRpb246IDAuM3MgZWFzZS1pbi1vdXQ7XG59XG4iXX0= */\"","import {AfterViewInit, Component, ElementRef, Input, OnInit, SimpleChanges, ViewChild} from '@angular/core';\nimport * as THREE from 'three-full';\nimport {ProjectDataService} from '../services/project-data.service';\nimport {ThreeContext} from './renderer';\n\n@Component({\n  selector: 'app-preview-panel',\n  templateUrl: './preview-panel.component.html',\n  styleUrls: ['./preview-panel.component.css']\n})\nexport class PreviewPanelComponent implements OnInit, AfterViewInit {\n\n  @Input() scrollSync: any;\n\n  @ViewChild('CanvasFinal', {static: false, read: ElementRef}) canvas: ElementRef;\n  private contextCanvasFinal: ThreeContext;\n\n  constructor(private pds: ProjectDataService) {\n  }\n\n  windowChanged() {\n    const curZoom = this.pds.curZoom;\n    this.canvas.nativeElement.style.transform = 'scale(' + curZoom + ')';\n    this.canvas.nativeElement.style.transformOrigin = 'top left';\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n\n  }\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n    this.windowChanged();\n    this.pds.windowChanged.subscribe((e) => this.windowChanged());\n    this.init();\n    this.pds.layerContentChange.subscribe(() => this.init());\n    this.pds.layerSelectionChange.subscribe(() => this.init());\n  }\n\n  init() {\n    if (!this.pds.curLayer) {\n      return;\n    }\n    const image = this.pds.editorImage;\n    const canvas = document.getElementById('CanvasFinal');\n    (canvas as any).width = this.pds.width;\n    (canvas as any).height = this.pds.height;\n\n    (canvas as any).style.width = this.pds.width;\n    (canvas as any).style.height = this.pds.height;\n\n    if (this.contextCanvasFinal) {\n      this.contextCanvasFinal.running = false;\n    }\n\n    const selfRef = this;\n\n    this.contextCanvasFinal = new ThreeContext('CanvasFinal', (threeContext) => {\n      threeContext.uniforms = {\n        flowSpeed: {type: 'f', value: 0.02},\n        cycleTime: {type: 'f', value: 10},\n      };\n      // waveMapFrag\n      threeContext.initFullScreenCanvas(selfRef.pds.layers);\n    }, null);\n    this.contextCanvasFinal.render(selfRef.pds.layers);\n    this.contextCanvasFinal.renderFrame.subscribe( () => selfRef.pds.renderedFrameEmitter.emit());\n  }\n\n}\n","import * as THREE from 'three-full';\nimport {Layer} from '../services/layer';\nimport {EventEmitter} from '@angular/core';\n\nexport class ThreeContext {\n\n  canvas: HTMLElement;\n  renderer: THREE.WebGLRenderer;\n  uniforms: any;\n  scene: THREE.Scene;\n  camera: THREE.PerspectiveCamera;\n  clock: THREE.Clock;\n  renderFunction: any;\n  size: [number, number];\n  timeDelta: number;\n  running = true;\n  uniformList = [];\n\n  renderFrame = new EventEmitter();\n  time = 0;\n\n\n  constructor(canvasName, initFunction, renderFunction) {\n    this.canvas = document.getElementById(canvasName);\n    this.renderer = new THREE.WebGLRenderer({canvas: this.canvas, antialiasing: false, alpha: true});\n    this.uniforms = {};\n    this.scene = new THREE.Scene();\n    this.camera = null;\n    this.clock = new THREE.Clock(true);\n    this.renderFunction = renderFunction;\n\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n\n    this.size = [(this.canvas as any).width, (this.canvas as any).height];\n    this.renderer.setSize(this.size[0], this.size[1]);\n\n    if (initFunction !== 'undefined') {\n      initFunction(this);\n    } else {\n      // Use a default camera\n      this.camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);\n    }\n  }\n\n  initFullScreenCanvas(layers) {\n    const useVertColors = undefined;\n    const vertShaderName = 'passthroughVert';\n    const fragShaderName = 'flowMapFrag';\n    const halfSize = [this.size[0] / 2, this.size[1] / 2];\n\n    // Setup camera\n    this.camera = new THREE.OrthographicCamera(-halfSize[0], halfSize[0], halfSize[1], -halfSize[1], -10, 1000);\n    this.camera.position.z = 1;\n\n    const defaultUniforms = {\n      time: {type: 'f', value: 0.0},\n      timeDelta: {type: 'f', value: 0.0},\n    };\n    this.uniforms = extend_object(defaultUniforms, this.uniforms || {});\n    this.scene = this.createFullScreenQuadScene(layers);\n  }\n\n  updateDefaultUniforms(uniforms) {\n    if (uniforms.timeDelta != null) {\n      uniforms.timeDelta.value = this.timeDelta;\n    }\n    if (uniforms.time != null) {\n      uniforms.time.value = this.time;\n    }\n  }\n\n  render(layers: Layer[]) {\n    if (!this.camera) {\n      return;\n    }\n    const self = this;\n    if (this.running) {\n      requestAnimationFrame(() => {\n        self.render(layers);\n        self.renderFrame.emit();\n        this.time += 1 / 60;\n      });\n    }\n\n    for (const layer of layers) {\n      layer.timeStep();\n    }\n    this.timeDelta = this.time;\n    this.updateDefaultUniforms(this.uniforms);\n    this.uniformList.forEach((uniform) => {\n      this.updateDefaultUniforms(uniform);\n    });\n    this.renderer.setClearColor(0xff0000, 0);\n    this.renderer.clear();\n\n    if (this.renderFunction !== 'undefined' && this.renderFunction != null) {\n      this.renderFunction(this);\n    }\n\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  createFullScreenQuadScene(layers) {\n    const scene = new THREE.Scene();\n    this.uniformList = [];\n    layers.forEach((layer, i) => {\n      const tuniforms = layer.addToScene(scene, i);\n\n      this.uniformList.push(tuniforms);\n    });\n    return scene;\n  }\n\n}\n\nfunction extend_object(destination, source) {\n  for (const property in source) {\n    if (source.hasOwnProperty(property)) {\n      destination[property] = source[property];\n    }\n  }\n  return destination;\n}\n\nfunction createMaterial(vertShaderName, fragShaderName, uniforms, useVertColors) {\n  const vShader = document.getElementById(vertShaderName);\n  if (vShader == null) {\n    console.error('Couldn\\'t find vert shader: ' + vertShaderName);\n  }\n\n  const fShader = document.getElementById(fragShaderName);\n  if (fShader == null) {\n    console.error('Couldn\\'t find frag shader: ' + fragShaderName);\n  }\n\n  return new THREE.ShaderMaterial({\n    uniforms: uniforms || {},\n    vertexShader: (vShader as any).text,\n    fragmentShader: (fShader as any).text,\n    vertexColors: useVertColors ? THREE.VertexColors : THREE.NoColors,\n    transparent: true,\n  });\n}\n\nexport function createFullScreenQuad(vertShaderName, fragShaderName, uniforms, useVertColors, z) {\n  const shaderMaterial = createMaterial(vertShaderName, fragShaderName, uniforms, useVertColors);\n  const planeGeo = new THREE.PlaneGeometry(2, 2, 1, 1);\n  planeGeo.translate(0, 0, -z / 10.0);\n  const mesh = new THREE.Mesh(planeGeo, shaderMaterial);\n  mesh.name = 'FullScreenQuad';\n  return mesh;\n}\n\n\nfunction setVertColors(mesh, color) {\n  for (let i = 0; i < mesh.faces.length; i++) {\n    const face = mesh.faces[i];\n    face.vertexColors = [color, color, color];\n  }\n}\n","export enum LayerType {\n  MorphLayer = 1,\n  ParticleLayer\n}\n\nexport interface Layer {\n  type: LayerType;\n  addToScene(scene, index): any;\n  timeStep();\n  saveState();\n  restoreState(state);\n}\n","import {createDefaultImage} from './utils';\nimport * as THREE from 'three-full';\nimport {createFullScreenQuad} from '../preview-panel/renderer';\nimport {Layer, LayerType} from './layer';\n\nexport class MorphLayer implements Layer {\n  public type = LayerType.MorphLayer;\n\n  private flowmap: HTMLCanvasElement;\n  public image: HTMLCanvasElement;\n\n  public flowmapTexture: THREE.CanvasTexture;\n  public imageTexture: THREE.CanvasTexture;\n\n  constructor(public name: string, public morphType: string, inputImage?) {\n    this.type = LayerType.MorphLayer;\n    if (!inputImage) {\n      // create dummy data\n      this.setFlowmap(createDefaultImage(512, 512));\n      this.setImage(createDefaultImage(512, 512));\n    } else {\n      this.setFlowmap(createDefaultImage(inputImage.width, inputImage.height));\n      this.setImage(inputImage);\n    }\n\n  }\n\n  setFlowmap(newFlowmap) {\n    this.flowmap = newFlowmap;\n    this.flowmapTexture = new THREE.CanvasTexture(this.flowmap);\n    this.flowmapTexture.flipY = false;\n    this.flowmapTexture.magFilter = THREE.NearestFilter;\n    this.flowmapTexture.minFilter = THREE.NearestFilter;\n  }\n\n  getFlowmap() {\n    return this.flowmap;\n  }\n\n  getFlowmapTexture() {\n    return this.flowmapTexture;\n  }\n\n  setImage(newImage) {\n    this.image = newImage;\n\n    const tc = document.createElement('canvas');\n    /*tc.width = (newFlowmap as any).nativeElement.width;\n    tc.height = (newFlowmap as any).nativeElement.height;*/\n    tc.width = 1024;\n    tc.height = 1024;\n    const tctx = tc.getContext('2d');\n    tctx.drawImage(newImage, 0, 0, newImage.width, newImage.height, 0, 0, 1024, 1024);\n\n\n    this.imageTexture = new THREE.CanvasTexture(tc);\n    // this.imageTexture.magFilter = THREE.NearestFilter;\n    // this.imageTexture.minFilter = THREE.NearestFilter;\n    this.imageTexture.flipY = false;\n  }\n\n  addToScene(scene, index) {\n    const tuniforms = {\n      texture: {type: 't', value: this.getImageTexture()},\n      flowMap: {type: 't', value: this.getFlowmapTexture()},\n      flowSpeed: {type: 'f', value: 0.1},\n      cycleTime: {type: 'f', value: 5},\n      time: {type: 'f', value: 0.0},\n      timeDelta: {type: 'f', value: 0.0},\n    };\n\n    const plane = createFullScreenQuad('passthroughVert', this.morphType, tuniforms, null, index);\n    scene.add(plane);\n    return tuniforms;\n  }\n\n  getImage() {\n    return this.image;\n  }\n\n  getImageTexture() {\n    return this.imageTexture;\n  }\n\n  timeStep() {\n  }\n\n  saveState() {\n    return {\n      type: this.type,\n      name: this.name,\n      flowMap: this.getFlowmap().toDataURL('image/png'),\n      image: this.getImage().toDataURL('image/png'),\n    };\n  }\n\n  restoreState(state) {\n    \n  }\n}\n","import {createDefaultImage} from './utils';\nimport * as THREE from 'three-full';\nimport {createFullScreenQuad} from '../preview-panel/renderer';\nimport {Layer, LayerType} from './layer';\nimport {Particle, ParticleFactory} from './particles/particle';\nimport {RectangularEmitter} from './particles/emitter';\n\nexport class ParticleLayer implements Layer {\n  public type = LayerType.ParticleLayer;\n\n  private canvas: HTMLCanvasElement;\n\n  public canvasTexture: THREE.CanvasTexture;\n\n  public emitters = [new RectangularEmitter()];\n  public particles = [];\n  public deadps = [];\n  public particleFactories: ParticleFactory[] = [new ParticleFactory()];\n\n  constructor(public name: string, width, height) {\n    // create dummy data\n    this.setCanvas(createDefaultImage(width, height));\n    this.type = LayerType.ParticleLayer;\n  }\n\n  setCanvas(newCanvas) {\n    this.canvas = newCanvas;\n    this.canvasTexture = new THREE.CanvasTexture(this.canvas);\n    this.canvasTexture.flipY = false;\n    this.canvasTexture.magFilter = THREE.NearestFilter;\n    this.canvasTexture.minFilter = THREE.NearestFilter;\n  }\n\n  getCanvasTexture() {\n    return this.canvasTexture;\n  }\n\n  addToScene(scene, index) {\n    const tuniforms = {\n      texture: {type: 't', value: this.getCanvasTexture()},\n      time: {type: 'f', value: 0.0},\n      timeDelta: {type: 'f', value: 0.0},\n    };\n    const plane = createFullScreenQuad('passthroughVert', 'passthroughFrag', tuniforms, null, index);\n    scene.add(plane);\n    return tuniforms;\n  }\n\n  timeStep() {\n    const ctx = this.canvas.getContext('2d');\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    const scaleX = this.canvas.width / 100;\n    const scaleY = this.canvas.height / 100;\n\n    for (const p of this.particles) {\n      p.x += p.vx;\n      p.y += p.vy;\n      p.ttl -= 1;\n      if (p.ttl === 0) {\n        p.dead = true;\n        this.deadps.push(p);\n      }\n    }\n\n    for (const p of this.particles) {\n      if (p.ttl >= 0) {\n        p.draw(ctx);\n      }\n    }\n\n    for (const pf of this.particleFactories) {\n      pf.scaleX = this.canvas.width / 100;\n      pf.scaleY = this.canvas.height / 100;\n    }\n\n    for (const emitter of this.emitters) {\n      emitter.emit(this.particleFactories[0], this.particles, this.deadps);\n    }\n\n\n    this.canvasTexture.needsUpdate = true;\n  }\n\n  restoreState(state) {\n  }\n\n  saveState() {\n    return {\n      type: this.type,\n      name: this.name,\n      canvas: this.canvas.toDataURL('image/png'),\n      emitters: this.emitters.map(e => e.saveState()),\n      particleFactories: this.particleFactories.map(pf => pf.saveState())\n    };\n  }\n}\n","import {Particle, ParticleFactory} from './particle';\nimport {Field, NumberField} from './particlesystem';\n\nexport interface Emitter {\n  readableName: string;\n  emissionRate: number;\n  fields: Field[];\n\n  emit(particleFactory: ParticleFactory, particles: Particle[], deadps: Particle[]);\n}\n\nexport class RectangularEmitter implements Emitter {\n  readableName = 'Rectangular emitter';\n\n  emissionRate: number;\n  minx: number;\n  maxx: number;\n  miny: number;\n  maxy: number;\n\n  mindir: number;\n  maxdir: number;\n  minvel: number;\n  maxvel: number;\n\n  fields = [\n    new NumberField('emissionRate', 'Rate of particle emission'),\n    new NumberField('minx', 'Minimum x-pos (0-100)'),\n    new NumberField('maxx', 'Maximum x-pos (0-100)'),\n    new NumberField('miny', 'Minimum y-pos (0-100)'),\n    new NumberField('maxy', 'Maximum y-pos (0-100)'),\n    new NumberField('mindir', 'Minimum starting angle (0-360)'),\n    new NumberField('maxdir', 'Maximum starting angle (0-360)'),\n    new NumberField('minvel', 'Minimum starting velocity'),\n    new NumberField('maxvel', 'Maximum starting velocity'),\n  ];\n\n  constructor(minx = 0, miny = 0, maxx = 100, maxy = 100, mindir = 0, maxdir = 360, minvel = 1, maxvel = 2) {\n    this.minx = Math.min(minx, maxx);\n    this.maxx = Math.max(minx, maxx);\n    this.miny = Math.min(miny, maxy);\n    this.maxy = Math.max(miny, maxy);\n    this.mindir = Math.min(mindir, maxdir);\n    this.maxdir = Math.max(mindir, maxdir);\n    this.minvel = Math.min(minvel, maxvel);\n    this.maxvel = Math.max(minvel, maxvel);\n    this.emissionRate = 1;\n  }\n\n  emit(particleFactory: ParticleFactory, particles: Particle[], deadps: Particle[]): void {\n    const res = [];\n    for (let i = this.emissionRate; i > 0; i--) {\n      if (i > 1 || Math.random() < i) {\n\n        const angle = this.mindir + Math.random() * (this.maxdir - this.mindir);\n        const vel = this.minvel + Math.random() * (this.maxvel - this.minvel);\n\n        const xpos = this.minx + Math.random() * (this.maxx - this.minx);\n        const ypos = this.miny + Math.random() * (this.maxy - this.miny);\n        const xvel = Math.cos(angle / 180 * Math.PI) * vel;\n        const yvel = Math.sin(angle / 180 * Math.PI) * vel;\n\n        particleFactory.create(xpos, ypos, xvel, yvel, particles, deadps);\n      }\n    }\n  }\n\n\n  saveState() {\n    const res = {};\n    for (const field of this.fields) {\n      res[field.key] = this[field.key];\n    }\n    return res;\n  }\n\n  restoreState(state) {\n    for (const key in state) {\n      this[key] = state[key];\n    }\n  }\n}\n","import {ImageField, NumberField} from './particlesystem';\n\nexport class Particle {\n\n  dead: boolean;\n  ttl: number;\n  pf: ParticleFactory;\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n\n  constructor() {\n    this.dead = true;\n    this.x = 0;\n    this.y = 0;\n    this.vx = 0;\n    this.vy = 0;\n    this.ttl = 0;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.resetTransform();\n    ctx.globalAlpha = this.pf.getAlpha(this.ttl);\n    ctx.beginPath();\n    if (this.pf.image) {\n      ctx.translate(this.x, this.y);\n      ctx.scale(this.pf.getSize(this.ttl) * this.pf.scaleX / this.pf.image.width, this.pf.getSize(this.ttl) * this.pf.scaleY / this.pf.image.height);\n      ctx.drawImage(this.pf.image, -this.pf.image.width / 2, -this.pf.image.width / 2);\n    } else {\n      ctx.arc(this.x, this.y, 5, 0, 2 * Math.PI);\n    }\n    ctx.stroke();\n    ctx.resetTransform();\n  }\n}\n\nexport class ParticleFactory {\n  alpha1 = 0;\n  alpha2 = 1;\n  alpha3 = 0;\n  acc1 = 0;\n  acc2 = 0;\n  acc3 = 0;\n  size1 = 0;\n  size2 = 5;\n  size3 = 0;\n\n  ttl = 100;\n\n  image: HTMLCanvasElement;\n  scaleX: number;\n  scaleY: number;\n\n  fields = [\n    new NumberField('alpha1', 'Alpha beginning (0-1)'),\n    new NumberField('alpha2', 'Alpha middle (0-1)'),\n    new NumberField('alpha3', 'Alpha end (0-1)'),\n    new NumberField('size1', 'Size beginning'),\n    new NumberField('size2', 'Size middle'),\n    new NumberField('size3', 'Size end'),\n    new NumberField('acc1', 'Acceleration beginning'),\n    new NumberField('acc2', 'Acceleration middle'),\n    new NumberField('acc3', 'Acceleration end'),\n    new NumberField('ttl', 'Frames to live'),\n    new ImageField('image', 'Image ')];\n\n  readableName = 'ParticleFactory';\n\n  constructor() {\n  }\n\n\n  create(xpos: number, ypos: number, xvel: number, yvel: number, particles: Particle[], deadps: Particle[]) {\n    let p;\n    if (deadps.length > 0) {\n      p = deadps.pop();\n    } else {\n      p = new Particle();\n      particles.push(p);\n    }\n\n    p.x = xpos * this.scaleX;\n    p.y = ypos * this.scaleY;\n    p.vx = xvel * this.scaleX;\n    p.vy = yvel * this.scaleY;\n    p.dead = false;\n    p.ttl = this.ttl;\n    p.pf = this;\n\n  }\n\n  getAlpha(curttl) {\n    const p = (this.ttl - curttl) / this.ttl;\n    if (p < 0.5) {\n      return this.alpha1 * (1 - p * 2) + this.alpha2 * p * 2;\n    } else {\n      return this.alpha2 * (2 - p * 2) + this.alpha3 * (p * 2 - 1);\n    }\n  }\n\n  getSize(curttl) {\n    const p = (this.ttl - curttl) / this.ttl;\n    if (p < 0.5) {\n      return this.size1 * (1 - p * 2) + this.size2 * p * 2;\n    } else {\n      return this.size2 * (2 - p * 2) + this.size3 * (p * 2 - 1);\n    }\n  }\n\n  saveState() {\n    const res = {};\n    for (const field of this.fields) {\n      res[field.key] = this[field.key];\n    }\n    return res;\n  }\n\n\n  restoreState(state) {\n    for (const key in state) {\n      this[key] = state[key];\n    }\n  }\n}\n","export interface Field {\n  type: string;\n}\n\nexport class NumberField implements Field {\n  type = 'number';\n  constructor(public key: string, public name: string) {\n  }\n}\n\nexport class ImageField implements Field {\n  type = 'image';\n  constructor(public key: string, public name: string) {\n  }\n}\n","import {EventEmitter, Injectable} from '@angular/core';\nimport {Layer, LayerType} from './layer';\nimport {drawCanvasToCanvas} from './utils';\nimport {MorphLayer} from './morphlayer';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProjectDataService {\n\n  layers: Layer[] = [];\n  curLayer: Layer;\n\n  editorImage: HTMLCanvasElement;\n\n  curColor = '#808080';\n  curZoom = 1;\n  curScrollLeft = 0;\n  curScrollTop = 0;\n\n  public drawSize = 20;\n\n  width = 512;\n  height = 512;\n\n  windowChanged = new EventEmitter();\n  layerSelectionChange = new EventEmitter();\n  layerContentChange = new EventEmitter();\n  blurEmitter = new EventEmitter<number>();\n\n  renderedFrameEmitter = new EventEmitter();\n\n  constructor() {\n    /*this.layers.push(new Layer('Layer ' + this.layers.length));\n    this.curLayer = this.layers[0];*/\n    this.renderedFrameEmitter = new EventEmitter();\n  }\n\n  setColor(color) {\n    this.curColor = color;\n  }\n\n  setZoom(zoom) {\n    this.curZoom = zoom;\n    this.windowChanged.emit();\n  }\n\n  addLayer(layer: Layer) {\n    this.layers.push(layer);\n\n    if (layer.type === LayerType.MorphLayer) {\n      this.width = (layer as MorphLayer).getImage().width;\n      this.height = (layer as MorphLayer).getImage().height;\n    }\n    setTimeout(() => this.selectLayer(layer), 100);\n    setTimeout(() => this.selectLayer(layer), 200);\n    this.saveState();\n  }\n\n  selectLayer(layer: Layer) {\n    this.curLayer = layer;\n    if (this.curLayer.type === LayerType.MorphLayer) {\n      this.editorImage = (this.curLayer as MorphLayer).getFlowmap();\n    }\n    this.layerSelectionChange.emit();\n    this.saveState();\n  }\n\n  setFlowMap(canvas: any) {\n    if (this.curLayer.type === LayerType.MorphLayer) {\n      drawCanvasToCanvas(canvas, (this.curLayer as MorphLayer).getFlowmap());\n      (this.curLayer as MorphLayer).setFlowmap((this.curLayer as MorphLayer).getFlowmap());\n      this.layerContentChange.emit();\n    }\n    this.saveState();\n  }\n\n  blurLayer(radius) {\n    this.blurEmitter.emit(radius);\n    this.saveState();\n  }\n\n  saveState() {\n    const layerState = [];\n    for (const layer of this.layers) {\n      layerState.push(layer.saveState());\n    }\n\n    const state = {\n      width: this.width,\n      height: this.height,\n      layers: layerState\n    };\n\n    console.log(state);\n  }\n\n  deleteCurrentLayer() {\n    if (this.curLayer) {\n      if (confirm('Are you sure you want to continue deleting this layer?')) {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n          if (this.layers[i] === this.curLayer) {\n            this.layers.splice(i, 1);\n            if (this.layers.length > 0) {\n              this.selectLayer(this.layers[Math.max(0, i - 1)]);\n            } else {\n              this.selectLayer(null);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  moveLayerDown() {\n    for (let i = this.layers.length - 1; i >= 0; i--) {\n      if (this.layers[i] === this.curLayer) {\n        if (this.layers.length > 1 && i > 0) {\n          this.layers[i] = this.layers[i - 1];\n          this.layers[i - 1] = this.curLayer;\n          break;\n        }\n      }\n    }\n    this.layerContentChange.emit();\n  }\n\n  moveLayerUp() {\n    for (let i = this.layers.length - 1; i >= 0; i--) {\n      if (this.layers[i] === this.curLayer) {\n        if (this.layers.length > 1 && i < this.layers.length - 1) {\n          this.layers[i] = this.layers[i + 1];\n          this.layers[i + 1] = this.curLayer;\n          break;\n        }\n      }\n    }\n    this.layerContentChange.emit();\n  }\n}\n","export function createDefaultImage(width, height) {\n  const tcanvas = document.createElement('canvas');\n  tcanvas.width = width;\n  tcanvas.height = height;\n  const tctx = tcanvas.getContext('2d');\n  tctx.fillStyle = '#808080';\n  tctx.fillRect(0, 0, tcanvas.width, tcanvas.height);\n\n  return tcanvas;\n}\n\nexport function drawCanvasToCanvas(from, to) {\n  to.width = from.width;\n  to.height = from.height;\n  const tctx = to.getContext('2d');\n  tctx.fillStyle = '#808080';\n  tctx.drawImage(from, 0, 0);\n}\n\nexport function imageUrlToCanvas(url) {\n  const img = new Image();\n  const tcanvas = document.createElement('canvas');\n  img.onload = () => {\n    tcanvas.width = img.width;\n    tcanvas.height = img.height;\n    const tctx = tcanvas.getContext('2d');\n    tctx.drawImage(img, 0, 0);\n  };\n  img.src = url;\n  return tcanvas;\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Rvb2wtcGFuZWwvZGlyZWN0aW9uLWNvbG9yLXBpY2tlci9kaXJlY3Rpb24tY29sb3ItcGlja2VyLmNvbXBvbmVudC5jc3MifQ== */\"","import {AfterViewInit, Component, ElementRef, EventEmitter, OnInit, Output, ViewChild} from '@angular/core';\nimport {ProjectDataService} from '../../services/project-data.service';\n\n@Component({\n  selector: 'app-direction-color-picker',\n  templateUrl: './direction-color-picker.component.html',\n  styleUrls: ['./direction-color-picker.component.css']\n})\nexport class DirectionColorPickerComponent implements OnInit, AfterViewInit {\n  @ViewChild('canvas', {static: false, read: ElementRef}) flowCanvas: ElementRef;\n  ctx: CanvasRenderingContext2D;\n  width = 100.0;\n\n  @Output() color = new EventEmitter<string>();\n\n  constructor(private pds: ProjectDataService) {\n  }\n\n  updateImage() {\n    this.flowCanvas.nativeElement.width = this.width;\n    this.flowCanvas.nativeElement.height = this.width;\n    this.ctx = this.flowCanvas.nativeElement.getContext('2d');\n    this.ctx.fillStyle = '#808080';\n    this.ctx.fillRect(0, 0, this.flowCanvas.nativeElement.width, this.flowCanvas.nativeElement.height);\n    for (let d = 0; d < 360; d++) {\n      for (let r = this.width / 2; r >= 0 ; r--) {\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.width / 2, this.width / 2);\n        this.ctx.lineTo(this.width / 2 - Math.cos(d / Math.PI * 180) * r, this.width / 2 - Math.sin(d / Math.PI * 180) * r);\n\n        let scale = (r) / (this.width / 2) * 128;\n        this.ctx.strokeStyle = 'rgb(' + (128 + Math.cos(d / Math.PI * 180) * scale) + \",\" + (128 + Math.sin(d / Math.PI * 180) * scale) + ',128)';\n        this.ctx.stroke();\n      }\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.flowCanvas.nativeElement.addEventListener('mousemove', (ev) => this.mousemove(ev));\n    this.flowCanvas.nativeElement.addEventListener('mousedown', (ev) => this.mousedown(ev));\n    this.flowCanvas.nativeElement.addEventListener('mouseup', (ev) => this.mouseup(ev));\n    this.updateImage();\n  }\n\n  mousemove(event) {\n    const rect = this.flowCanvas.nativeElement.getBoundingClientRect();\n    const mouseX = event.pageX - rect.left;\n    const mouseY = event.pageY - rect.top;\n  }\n\n  mousedown(event) {\n    const rect = this.flowCanvas.nativeElement.getBoundingClientRect();\n    const mouseX = event.pageX - rect.left;\n    const mouseY = event.pageY - rect.top;\n    let p = this.ctx.getImageData(mouseX, mouseY, 1, 1).data;\n    const selCol = 'rgb(' + p[0] + ',' + p[1] + ',' + p[2] + ')';\n    this.color.emit(selCol);\n    this.pds.setColor(selCol);\n  }\n\n  mouseup(event) {\n  }\n\n  ngOnInit(): void {\n  }\n}\n","export default \"#dialogBack.hidden {\\n  display: none;\\n}\\n\\n#dialogBack {\\n  position: fixed;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n  min-width: 300px;\\n  min-height: 200px;\\n  background: rgba(0,0,0,0.2);\\n  z-index: 1000;\\n  display: grid;\\n}\\n\\n#newLayerDialog {\\n  width: 300px;\\n  margin-right: auto;\\n  padding: 1rem;\\n  background-color: white;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdG9vbC1wYW5lbC90b29sLXBhbmVsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsT0FBTztFQUNQLE1BQU07RUFDTixXQUFXO0VBQ1gsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixpQkFBaUI7RUFDakIsMkJBQTJCO0VBQzNCLGFBQWE7RUFDYixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGFBQWE7RUFDYix1QkFBdUI7QUFDekIiLCJmaWxlIjoic3JjL2FwcC90b29sLXBhbmVsL3Rvb2wtcGFuZWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIiNkaWFsb2dCYWNrLmhpZGRlbiB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNkaWFsb2dCYWNrIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIG1pbi13aWR0aDogMzAwcHg7XG4gIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMik7XG4gIHotaW5kZXg6IDEwMDA7XG4gIGRpc3BsYXk6IGdyaWQ7XG59XG5cbiNuZXdMYXllckRpYWxvZyB7XG4gIHdpZHRoOiAzMDBweDtcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBwYWRkaW5nOiAxcmVtO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn1cbiJdfQ== */\"","import {Component, OnInit} from '@angular/core';\nimport {ProjectDataService} from '../services/project-data.service';\n\n@Component({\n  selector: 'app-tool-panel',\n  templateUrl: './tool-panel.component.html',\n  styleUrls: ['./tool-panel.component.css']\n})\nexport class ToolPanelComponent implements OnInit {\n\n  constructor(private pds: ProjectDataService) {\n  }\n\n  renderLayerVisible = false;\n\n  worker;\n  sampleImageData;\n  sampleVideoData;\n  outputElement;\n  filesElement;\n  running = false;\n  isWorkerLoaded = false;\n  isSupported = (function() {\n    return document.querySelector && window.URL && (window as any).Worker;\n  })();\n\n  ngOnInit() {\n  }\n\n  zoom(factor) {\n    this.pds.setZoom(this.pds.curZoom * factor);\n  }\n\n  changePenSize(event) {\n    console.log(event);\n    this.pds.drawSize = event.target.value;\n  }\n\n  blur() {\n    const radius = parseInt(prompt('Please enter blur radius', '10'), 10);\n    this.pds.blurLayer(radius);\n  }\n\n  renderDialog() {\n    this.renderLayerVisible = true;\n  }\n\n  render() {\n    const time = parseInt((document.getElementById('renderTime') as any).value, 10);\n    const frames = time * 30;\n\n    const images = [];\n    let renderStarted = false;\n\n    const canvas = document.getElementById('CanvasFinal');\n    this.pds.renderedFrameEmitter.subscribe(() => {\n      if (images.length < frames) {\n        const timg = new Image();\n        timg.src = (canvas as any).toDataURL();\n        images.push(timg);\n      } else if (!renderStarted) {\n        renderStarted = true;\n        this.startRender(images);\n        console.log(images);\n      }\n    });\n  }\n\n  startRender(images) {\n    this.initWorker();\n    this.ffmpeg(images);\n  }\n\n  initWorker() {\n    this.outputElement = document.getElementById('outputElement');\n\n    this.worker = new Worker('assets/worker-asm.js');\n    this.worker.onmessage = (event) => {\n      const message = event.data;\n      if (message.type == 'ready') {\n        this.isWorkerLoaded = true;\n        this.worker.postMessage({\n          type: 'command',\n          arguments: ['-help']\n        });\n      } else if (message.type === 'stdout') {\n        //this.outputElement.innerHTML += message.data + '\\n';\n      } else if (message.type === 'start') {\n        //this.outputElement.innerHTML = 'Worker has received command\\n';\n      } else if (message.type === 'done') {\n        const buffers = message.data;\n        if (buffers.length) {\n          this.outputElement.className = 'closed';\n        }\n        buffers.forEach((file) => {\n\n          console.log(this.getDownloadLink(file.data, file.name));\n          this.outputElement.appendChild(this.getDownloadLink(file.data, file.name));\n        });\n      }\n    };\n  }\n\n  parseArguments(text) {\n    text = text.replace(/\\s+/g, ' ');\n    let args = [];\n    // Allow double quotes to not split args.\n    text.split('\"').forEach(function(t, i) {\n      t = t.trim();\n      if ((i % 2) === 1) {\n        args.push(t);\n      } else {\n        args = args.concat(t.split(' '));\n      }\n    });\n    return args;\n  }\n\n  ffmpeg(frames) {\n    const text = '-framerate 30 -i img%03d.jpeg -c:v libx264 -vf fps=25 -pix_fmt yuv420p out.mp4';\n    const args = this.parseArguments(text);\n    console.log(args);\n\n    const tempFiles = [];\n    for (let i = 0; i < frames.length; i++) {\n      tempFiles.push({\n        name: 'img' + this.lpad(i, 3) + '.jpeg',\n        data: this.imagetoUint8(frames[i])\n      });\n    }\n\n\n    this.worker.postMessage({\n      type: 'command',\n      arguments: args,\n      files: tempFiles\n    });\n  }\n\n  lpad(value, padding) {\n    const zeroes = new Array(padding + 1).join('0');\n    return (zeroes + value).slice(-padding);\n  }\n\n  imagetoUint8(img) {\n    const cv = document.createElement('canvas');\n    cv.width = img.naturalWidth; // or 'width' if you want a special/scaled size\n    cv.height = img.naturalHeight; // or 'height' if you want a special/scaled size\n\n    cv.getContext('2d').drawImage(img, 0, 0);\n    const dataUrl = cv.toDataURL('image/jpeg');\n    return this.dataURLtoUint8(dataUrl);\n  }\n\n  dataURLtoFile(dataurl, filename) {\n    let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n      bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n    while (n--) {\n      u8arr[n] = bstr.charCodeAt(n);\n    }\n    return new File([u8arr], filename, {type: mime});\n  }\n\n  dataURLtoUint8(dataurl) {\n    let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n      bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n    while (n--) {\n      u8arr[n] = bstr.charCodeAt(n);\n    }\n    return u8arr;\n  }\n\n  getDownloadLink(fileData, fileName) {\n    if (fileName.match(/\\.jpeg|\\.gif|\\.jpg|\\.png/)) {\n      const blob = new Blob([fileData]);\n      const src = window.URL.createObjectURL(blob);\n      const img = document.createElement('img');\n\n      img.src = src;\n      return img;\n    } else {\n      const a = document.createElement('a');\n      a.download = fileName;\n      const blob = new Blob([fileData]);\n      const src = window.URL.createObjectURL(blob);\n      a.href = src;\n      a.innerHTML = 'Click here to download ' + fileName + '!';\n      return a;\n    }\n  }\n\n  closeDialog(event: MouseEvent) {\n    this.renderLayerVisible = false;\n    event.stopPropagation();\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}